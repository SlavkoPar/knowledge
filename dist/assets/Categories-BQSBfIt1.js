const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AutoSuggestQuestions-BACKsPf7.js","assets/index-CuxjKTJ_.js","assets/index-i_Noyz8o.css","assets/lib-CcS-psvA.js","assets/AutoSuggestQuestions-DN6HBK-e.css"])))=>i.map(i=>d[i]);
import{l as n,m as ht,n as wt,o as ft,F as h,I as xe,e as ne,r as x,p as he,q as we,s as ie,t as Le,v as Ct,Q as qe,w as ce,x as Rt,y as Ce,z as Tt,D as St,j as e,B as U,d as ve,E as Ge,H as fe,J as jt,K as Nt,C as _t,_ as vt}from"./index-CuxjKTJ_.js";import{L as J,F as se,f as Fe,a as $e,u as ye,M as Y,b as At,c as It,d as Re,A as Ot,B as Te,e as Be,g as Me,h as Ue,i as je,j as Q,S as Ae,k as Ne,s as Qt,l as bt,C as Pe,m as ze,Q as Ve,n as kt,o as Dt,p as Lt,q as qt,r as Gt}from"./AutoSuggestAnswers-CBR7Acuk.js";import{f as Ke,a as Ft}from"./lib-CcS-psvA.js";import{R as ge,C as ue}from"./App-BbS5zoGd.js";const _e={topId:"",parentId:"null",id:"generateId",categoryTitle:"",title:"",assignedAnswers:[],numOfAssignedAnswers:0,relatedFilters:[],numOfRelatedFilters:0,source:0,status:0,included:!1},Ye={topId:"null",parentId:"null",id:"define at BackEnd",kind:0,title:"",link:"",header:"",level:0,variations:[],hasSubCategories:!1,categoryRows:[],questionRows:[],numOfQuestions:0,hasMoreQuestions:!1,isExpanded:!1,doc1:""},$t=(t,r)=>{console.log("------------------------------->"),console.log("------------------------------->",r.type),console.log("------------------------------->");const{categoryRow:i}=r.payload;if(r.type===n.SET_FROM_LOCAL_STORAGE){const{keyExpanded:y}=r.payload;return{...t,keyExpanded:y}}let s=i?!ht.includes(r.type):!1;const{topRows:o}=t,c=wt.includes(r.type)?{...t}:Bt(t,r);if(s&&i){let y;const{topId:E,id:C}=i;if(C===E)y=o.map(a=>a.id===E?new X(i).categoryRow:new X(a).categoryRow);else{const a=o.find(R=>R.id===E);X.idToSet=C,X.newCategoryRow=i;const f=new X(a).categoryRow;y=o.map(R=>R.id===E?f:new X(R).categoryRow),X.idToSet=""}c.topRows=y}if(ft.includes(r.type)){const{keyExpanded:y}=c,E={keyExpanded:y};localStorage.setItem("CATEGORIES_STATE",JSON.stringify(E))}return console.log("CategoryReducer newState",c),c},Bt=(t,r)=>{switch(r.type){case n.SET_TOP_ROWS_LOADING:return{...t,loadingCategories:!0,topRowsLoading:!0};case n.SET_TOP_ROWS:{const{topRows:s}=r.payload;return console.log("=> CategoriesReducer ActionTypes.SET_TOP_ROWS",t.topRows,s),{...t,topRows:s,topRowsLoading:!1,topRowsLoaded:!0,loadingCategories:!1}}case n.SET_ALL_CATEGORY_ROWS:{const{allCategoryRows:s}=r.payload;return{...t,allCategoryRows:s,allCategoryRowsLoaded:Date.now()}}case n.SET_NODE_EXPANDING_UP_THE_TREE:{const{fromChatBotDlg:s}=r.payload,{keyExpanded:o,activeCategory:c,activeQuestion:y}=t;return{...t,nodeOpening:!0,loadingCategories:!0,nodeOpened:!1,keyExpanded:s?null:{...o},activeCategory:s?null:c,activeQuestion:s?null:y}}case n.SET_NODE_EXPANDED_UP_THE_TREE:{const{category:s,formMode:o,catKey:c,questionId:y,question:E}=r.payload,{id:C}=c;return{...t,activeCategory:s,activeQuestion:E,selectedQuestionId:y,formMode:o,categoryId_questionId_done:`${C}_${y}`,nodeOpening:!1,nodeOpened:!0,loadingCategories:!1}}case n.SET_LOADING_CATEGORY:return{...t,loadingCategory:!0,categoryLoaded:!1};case n.FORCE_OPEN_NODE:const{keyExpanded:i}=r.payload;return{...t,topRows:t.topRows.filter(s=>s.parentId===null),keyExpanded:i,nodeOpened:!1,activeCategory:null,activeQuestion:null,selectedQuestionId:null};case n.SET_SUB_CATEGORIES:return{...t,loadingCategory:!1};case n.SET_ERROR:{const{error:s,whichRowId:o}=r.payload;return{...t,error:s,whichRowId:o,loadingCategories:!1,loadingQuestions:!1,loadingCategory:!1,categoryLoaded:!1,loadingQuestion:!1,questionLoaded:!1}}case n.ADD_SUB_CATEGORY:{const{categoryKey:s,level:o}=r.payload,{topId:c}=s,y={...Ye,topId:c,level:o,parentId:""};return{...t,activeCategory:y,formMode:h.AddingCategory}}case n.SET_CATEGORY:{const{categoryRow:s}=r.payload;return console.assert(xe(s)),{...t,loadingCategory:!1,categoryLoaded:!0,activeCategory:s,activeQuestion:null,selectedQuestionId:null}}case n.SET_ROW_EXPANDING:return{...t,rowExpanding:!0,rowExpanded:!1,loadingCategories:!0};case n.SET_ROW_EXPANDED:{const{categoryRow:s}=r.payload,{topId:o,id:c}=s,{keyExpanded:y}=t,E=y?y.questionId:null;return{...t,loadingCategories:!1,keyExpanded:{topId:o,categoryId:c,questionId:E},activeQuestion:null,selectedQuestionId:E,loadingQuestion:!1,questionLoaded:!1,rowExpanding:!1,rowExpanded:!0}}case n.SET_ROW_COLLAPSED:{const{categoryRow:s}=r.payload,{topId:o,parentId:c}=s;return{...t,loadingCategories:!1,keyExpanded:{topId:o,categoryId:c??"",questionId:null},rowExpanding:!1,rowExpanded:!0,activeCategory:null,activeQuestion:null,selectedQuestionId:null}}case n.SET_CATEGORY_TO_VIEW:{const{categoryRow:s}=r.payload;console.assert(xe(s));const c={...s,isExpanded:!1};return{...t,formMode:h.ViewingCategory,loadingCategory:!1,activeCategory:c,activeQuestion:null,selectedQuestionId:null}}case n.SET_CATEGORY_TO_ADD_TOP:{const{newCategoryRow:s}=r.payload;return{...t,loadingCategory:!1,categoryLoaded:!0,activeCategory:{...s,doc1:""},activeQuestion:null,selectedQuestionId:null,topRows:[s,...t.topRows],formMode:h.AddingCategory}}case n.SET_CATEGORY_TO_ADD:{const{newCategoryRow:s}=r.payload;return{...t,loadingCategory:!1,categoryLoaded:!0,activeCategory:{...s,doc1:""},activeQuestion:null,selectedQuestionId:null,formMode:h.AddingCategory}}case n.SET_CATEGORY_ADDED:{const{categoryRow:s}=r.payload;console.assert(xe(s));const c={...s,isExpanded:!1},{topId:y,id:E}=c;return{...t,formMode:h.EditingCategory,loadingCategory:!1,categoryLoaded:!1,activeCategory:c,activeQuestion:null,selectedQuestionId:null,keyExpanded:{topId:y,categoryId:E,questionId:null},nodeOpened:!1}}case n.SET_CATEGORY_TO_EDIT:case n.SET_CATEGORY_UPDATED:{const{categoryRow:s,category:o}=r.payload;console.assert(xe(s));const{topId:c,id:y}=o;return{...t,formMode:h.EditingCategory,loadingCategory:!1,categoryLoaded:!0,keyExpanded:{topId:c,categoryId:y,questionId:null},activeCategory:o,activeQuestion:null,selectedQuestionId:null}}case n.SET_CATEGORY_QUESTIONS_LOADING:return{...t,loadingQuestions:!0,questionLoaded:!1};case n.CATEGORY_QUESTIONS_LOADED:return{...t,loadingQuestions:!1};case n.DELETE_CATEGORY:return{...t,activeCategory:null,formMode:h.None,error:void 0,whichRowId:void 0};case n.CANCEL_CATEGORY_FORM:case n.CLOSE_CATEGORY_FORM:return{...t,activeCategory:null,formMode:h.None};case n.CANCEL_ADD_SUB_CATEGORY:return{...t,activeCategory:null,activeQuestion:null,selectedQuestionId:null,formMode:h.None};case n.SET_LOADING_QUESTION:return{...t,loadingQuestion:!0,questionLoaded:!1};case n.CANCEL_ADD_QUESTION:return{...t,formMode:h.None,activeQuestion:null,selectedQuestionId:null};case n.SET_QUESTION_SELECTED:{const{questionKey:s}=r.payload,{topId:o,parentId:c,id:y}=s;return{...t,topRows:t.topRows.filter(E=>E.parentId===null),keyExpanded:{topId:o,categoryId:c,questionId:y},nodeOpened:!1,activeCategory:null,activeQuestion:null,selectedQuestionId:null}}case n.ADD_NEW_QUESTION_TO_ROW:{const{newQuestionRow:s}=r.payload;return{...t,selectedQuestionId:s.id}}case n.SET_QUESTION:{const{question:s,formMode:o}=r.payload;return console.log(n.SET_QUESTION,s),{...t,activeCategory:null,activeQuestion:s,formMode:o,error:void 0,loadingCategory:!1,loadingQuestion:!1,questionLoaded:!0}}case n.SET_QUESTION_AFTER_ASSIGN_ANSWER:{const{question:s}=r.payload;return{...t,activeQuestion:s,loadingQuestion:!1,questionLoaded:!0}}case n.SET_QUESTION_TO_VIEW:{const{question:s}=r.payload,{keyExpanded:o}=t;return{...t,formMode:h.ViewingQuestion,keyExpanded:o,activeQuestion:s,loadingQuestion:!1,questionLoaded:!0}}case n.SET_QUESTION_TO_EDIT:{const{question:s}=r.payload,{topId:o,id:c,parentId:y}=s;return{...t,keyExpanded:{topId:o,categoryId:y,questionId:c},activeQuestion:s,formMode:h.EditingQuestion,selectedQuestionId:s.id,loadingQuestion:!1,questionLoaded:!0}}case n.QUESTION_DELETED:return{...t,activeQuestion:null,selectedQuestionId:null,formMode:h.None,loadingQuestion:!1,questionLoaded:!0};case n.CANCEL_QUESTION_FORM:case n.CLOSE_QUESTION_FORM:return{...t,formMode:h.None,activeQuestion:null,selectedQuestionId:null};default:return alert(`Action ${r.type} not allowed`),{...t}}};class X{static idToSet;static newCategoryRow;constructor(r){const{topId:i,id:s,parentId:o,title:c,link:y,kind:E,header:C,level:a,variations:f,numOfQuestions:R,hasSubCategories:O,categoryRows:T,created:F,modified:q,questionRows:k,isExpanded:j}=r,I=T.map(G=>(console.log("DeepClone >>>>>>>>>>>>>>>",G.id),G.id===X.idToSet?{...X.newCategoryRow}:new X(G).categoryRow));this.categoryRow={topId:i,parentId:o,id:s,kind:E,title:c,link:y,header:C,level:a,hasSubCategories:O,categoryRows:I,numOfQuestions:R,questionRows:k,variations:f??[],created:F,modified:q,isExpanded:j}}categoryRow}const He=x.createContext({}),We=x.createContext(()=>null),Mt={formMode:h.None,allCategoryRows:new Map,allCategoryRowsLoaded:void 0,topRows:[],topRowsLoading:!1,topRowsLoaded:!1,nodeOpening:!1,nodeOpened:!1,keyExpanded:null,categoryId_questionId_done:void 0,activeCategory:null,activeQuestion:null,selectedQuestionId:null,loadingCategories:!1,loadingQuestions:!1,loadingCategory:!1,categoryLoaded:!1,loadingQuestion:!1,questionLoaded:!1,error:void 0,rowExpanding:!1,rowExpanded:!1},Ut=({children:t})=>{const r=ne(),{KnowledgeAPI:i,isAuthenticated:s,workspace:o,authUser:c,canEdit:y}=r,{nickName:E}=c,[C,a]=x.useReducer($t,Mt),{formMode:f,activeCategory:R,activeQuestion:O,keyExpanded:T,topRows:F,allCategoryRows:q,allCategoryRowsLoaded:k}=C;console.log("----->>> ----->>> ----->>> CategoryProvider"),x.useEffect(()=>{let d=o==="SLINDZA"?{topId:"QUESTIONS",categoryId:"QUESTIONS",questionId:"qqqqqq111"}:{topId:"MTS",categoryId:"REMOTECTRLS",questionId:"qqqqqq111"};if("localStorage"in window){let l=localStorage.getItem("CATEGORIES_STATE");if(console.log("CATEGORIES_STATE loaded before signIn",l),l!==null){const p=JSON.parse(l);p.keyExpanded!==null&&(d=p.keyExpanded)}}a({type:n.SET_FROM_LOCAL_STORAGE,payload:{keyExpanded:d}})},[o]);const j=x.useCallback(async(d,l,p=null,u=void 0)=>{const g=localStorage.getItem("accessToken");if(g)try{console.log("------Execute endpoint:",l);let m=null;const w=new Headers,v=`Bearer ${g}`;w.append("Authorization",v),p&&w.append("Content-Type","application/json");let L={method:d,headers:w,body:p?JSON.stringify(p):null};if(m=await fetch(l,L),m.ok){if(m.status===200||m.status===201){let B=null;try{B=await m.json()}catch{a({type:n.SET_ERROR,payload:{error:new Error(`Response status: ${m.status}`),whichRowId:u}})}finally{return B}}}else{const{errors:B}=await m.json(),W=new Error(B?.map(Z=>Z.message).join(`
`)??"unknown");a({type:n.SET_ERROR,payload:{error:W,whichRowId:u}})}}catch(m){console.log("-------------->>> execute",d,l,m),a({type:n.SET_ERROR,payload:{error:new Error("fetch eror"),whichRowId:u}})}return null},[]),I=x.useCallback(async()=>new Promise(async d=>{try{console.time();const l=`${i.endpointCategoryRow}/${o}`;await j("GET",l,null).then(p=>{const u=new Map;console.timeEnd(),p.forEach(g=>u.set(g.Id,new he(g).categoryRow)),u.forEach(g=>{let{id:m,parentId:w}=g,v=m,L=w;for(;L;){const B=u.get(L);v=B.id+" / "+v,L=B.parentId}g.titlesUpTheTree=v,u.set(m,g)}),a({type:n.SET_ALL_CATEGORY_ROWS,payload:{allCategoryRows:u}})})}catch(l){console.log(l),a({type:n.SET_ERROR,payload:{error:l}})}d(!0)}),[j,i.endpointCategoryRow,o]),G=x.useCallback(async d=>{try{return q.get(d)}catch(l){console.log(l),a({type:n.SET_ERROR,payload:{error:l}})}},[q]);x.useEffect(()=>{(async()=>k===void 0&&await I())()},[k,I]);const P=x.useCallback(async d=>{try{let l="";const p=[];return q.forEach((u,g)=>{g===d?l="":u.parentId===d&&p.push(u)}),{subCats:p,parentHeader:l}}catch(l){return console.log(l),a({type:n.SET_ERROR,payload:{error:l}}),{subCats:[],parentHeader:"Kiks subCats"}}},[q]),N=x.useCallback(async()=>new Promise(async d=>{try{a({type:n.SET_TOP_ROWS_LOADING,payload:{}});const l=`${i.endpointCategoryRow}/${o}/null/topRows/all`;console.log("CategoryProvider loadTopRows url:",l),console.log("loadTopRows AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"),console.time(),await j("GET",l).then(p=>{console.timeEnd(),console.log("loadTopRows BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB");const u=p.map(g=>(g.IsExpanded=T?g.Id===T.categoryId:!1,new he(g).categoryRow));a({type:n.SET_TOP_ROWS,payload:{topRows:u}}),d(!0)})}catch(l){console.log(l),a({type:n.SET_ERROR,payload:{error:l}})}}),[j,i.endpointCategoryRow,T,o]),$=x.useCallback(async(d,l)=>{const{topId:p,id:u}=d;return console.log({categoryKey:d,includeQuestionId:l}),new Promise(async g=>{try{const m=`${i.endpointCategory}/${o}/${p}/${u}/${pe}/${l}`;console.time(),console.log("================ getCategory ======================="),await j("GET",m).then(w=>{console.timeEnd();const{categoryDto:v,msg:L}=w;g(v?new we(v).category:new Error(L))})}catch(m){console.log(m),g(m)}})},[j,i.endpointCategory,o]),S=x.useCallback((d,l)=>{if(d.topId===l)return d;const{categoryRows:p}=d;let u=p.find(g=>g.id===(l??"null"));if(!u)try{p.forEach(g=>{if(console.log(l,g.id),u=S(g,l),u)throw new Error("Stop the loop")})}catch{}return u},[]),V=x.useCallback(async(d,l,p="false")=>new Promise(async()=>{try{let{topId:u,parentId:g,id:m}=d;if(console.assert(m!==null,"id ne sme biti null u expandNodesUpToTheTree"),m){const B=q.get(m);B?(d.topId=B.topId,d.parentId=B.parentId):alert("reload all categoryRow:"+m)}a({type:n.SET_NODE_EXPANDING_UP_THE_TREE,payload:{fromChatBotDlg:p==="true"}}),console.time();const w={topId:u,id:m,parentId:null},v=new ie(w).toQuery(o),L=`${i.endpointCategoryRow}?${v}&pageSize=${pe}&includeQuestionId=${l??null}`;await j("GET",L).then(async B=>{const{categoryRowDto:W}=B;if(console.timeEnd(),W){let Z=null,de=null,re=new he(W).categoryRow;if(g!==null){const Ee=S(re,m);if(Z={...Ee,doc1:""},l){const ke=Ee.questionRows.find(De=>De.id===l&&De.included);ke&&(Z=null,de={...ke,assignedAnswers:[],numOfAssignedAnswers:0,numOfRelatedFilters:0,relatedFilters:[],source:0,status:0})}}console.log(">>> expandNodeUpToTheTree categoryRow",{categoryRow:re,questionId:"'"+(l??"jok")+"'"+(l??"JOK")});const Se=l?y?h.EditingQuestion:h.ViewingQuestion:y?h.EditingCategory:h.ViewingCategory;a({type:n.SET_NODE_EXPANDED_UP_THE_TREE,payload:{catKey:d,categoryRow:re,category:Z,questionId:l??null,question:de,formMode:Se,fromChatBotDlg:p==="true"}})}})}catch(u){console.log(u),a({type:n.SET_ERROR,payload:{error:u}})}}),[o,i.endpointCategoryRow,j,q,S,y]),b=x.useCallback(async(d,l=!1,p=null)=>{const u=new ie(d).toQuery(o);return new Promise(async g=>{try{const m=`${i.endpointCategoryRow}/${l}/${pe}/${p}?${u}`;console.time(),await j("GET",m).then(w=>{console.timeEnd();const{categoryRowDto:v,msg:L}=w;g(v?new he(v).categoryRow:new Error(L))})}catch(m){console.log(m),g(m)}})},[j,i.endpointCategoryRow,o]),D=x.useCallback(async({categoryKey:d,includeQuestionId:l,newQuestionRow:p,formMode:u})=>{try{a({type:n.SET_ROW_EXPANDING,payload:{}});const g=await b(d,!0,l);if(g instanceof Error)a({type:n.SET_ERROR,payload:{error:g}}),console.error({cat:g});else{let m;return l&&g.questionRows.filter(w=>w.included).length>0&&(m=l),p&&(g.questionRows=[p,...g.questionRows]),g.isExpanded=!0,console.log("@@@@@@@@@@@@@@@@@ expandCategory:",u,l),u===h.None&&l&&(u=y?h.EditingQuestion:h.ViewingQuestion),a({type:n.SET_ROW_EXPANDED,payload:{categoryRow:g,formMode:u,selectedQuestionId:m}}),g}}catch(g){return console.log("error",g),a({type:n.SET_ERROR,payload:{error:g}}),null}},[y,b]),ee=x.useCallback(async d=>{const{topId:l,id:p}=d,u=F.find(m=>m.id===l);d={...u.id===p?u:S(u,p),isExpanded:!1,categoryRows:[],questionRows:[]},a({type:n.SET_ROW_COLLAPSED,payload:{categoryRow:d}})},[S,F]),_=x.useCallback(async d=>{try{a({type:n.CLOSE_CATEGORY_FORM,payload:{}});const{topId:l,id:p,parentId:u,level:g}=d??{topId:"generateId",id:"generateId",parentId:null,level:0},m={...Ye,topId:l,parentId:d?p:u,id:"generateId",level:g+1,title:"",isExpanded:!1};if(d===null)a({type:n.SET_CATEGORY_TO_ADD_TOP,payload:{newCategoryRow:m}});else{const w={...d,level:g+1,categoryRows:[m,...d.categoryRows],hasSubCategories:!0,isExpanded:!0};a({type:n.SET_CATEGORY_TO_ADD,payload:{categoryRow:w,newCategoryRow:m}})}}catch(l){console.log("error",l),a({type:n.SET_ERROR,payload:{error:l}})}},[]),K=x.useCallback(async()=>{try{const{topId:d,id:l,parentId:p}=R,g={categoryKey:{topId:d,parentId:p,id:l},formMode:h.None},m=await D(g);m&&a({type:n.CANCEL_ADD_SUB_CATEGORY,payload:{categoryRow:m}})}catch(d){console.log("error",d),a({type:n.SET_ERROR,payload:{error:d}})}},[R,D]),ae=x.useCallback(async d=>{const{id:l}=d;a({type:n.SET_LOADING_CATEGORY,payload:{}});try{const p=new Le(d,o).categoryDto;console.log("categoryDto",{categoryDto:p});const u=`${i.endpointCategory}`;console.time(),await j("POST",u,p,l).then(async g=>{console.timeEnd();const{categoryDto:m}=g;if(m){const w=new we(m).category;console.log("Category successfully created",{category:w}),await I().then(async()=>{await N(),w.parentId===null?a({type:n.SET_CATEGORY_ADDED,payload:{categoryRow:w}}):a({type:n.SET_CATEGORY_ADDED,payload:{categoryRow:w}})})}})}catch(p){console.log(p),a({type:n.SET_ERROR,payload:{error:new Error("Server Error"),whichRowId:l}})}},[j,i.endpointCategory,I,N,o]),A=x.useCallback(async()=>{try{const{topId:d,parentId:l}=O,u={categoryKey:{topId:d,parentId:l,id:l},formMode:h.None},g=await D(u);g&&a({type:n.CANCEL_ADD_QUESTION,payload:{categoryRow:g}})}catch(d){console.log("error",d),a({type:n.SET_ERROR,payload:{error:d}})}},[O,D]),M=x.useCallback(async(d,l)=>{f===h.AddingQuestion?await A():f===h.AddingCategory&&await K(),a({type:n.SET_LOADING_CATEGORY,payload:{categoryRow:d}});const p=new ie(d).categoryKey,u=await $(p,l);u instanceof Error?a({type:n.SET_ERROR,payload:{error:u}}):(u.topId=d.topId,a({type:n.SET_CATEGORY_TO_VIEW,payload:{categoryRow:u}}))},[K,A,f,$]),te=x.useCallback(async(d,l)=>{f===h.AddingQuestion?await A():f===h.AddingCategory&&await K(),a({type:n.SET_LOADING_CATEGORY,payload:{}});const p=new ie(d).categoryKey,u=await $(p,l);if(u instanceof Error)a({type:n.SET_ERROR,payload:{error:u}});else{const g={...u,isExpanded:!1,categoryRows:[],questionRows:[]};a({type:n.SET_CATEGORY_TO_EDIT,payload:{categoryRow:g,category:u}})}},[K,A,f,$]),H=x.useCallback(async d=>{a({type:n.SET_LOADING_CATEGORY,payload:{}});try{const l=new Le(d,o).categoryDto,p=`${i.endpointCategory}`;console.time(),await j("PUT",p,l).then(u=>{console.timeEnd();const{categoryDto:g,msg:m}=u;if(g){const w=new we(g).category,{topId:v}=w;w.isExpanded=!1,w.topId=v,a({type:n.SET_CATEGORY_UPDATED,payload:{category:w}})}else a({type:n.SET_ERROR,payload:{error:new Error(`${m}`)}})})}catch(l){return console.log(l),a({type:n.SET_ERROR,payload:{error:new Error("Karambol")}}),l}},[j,i.endpointCategory,o]),le=x.useCallback(async d=>{try{const{topId:l,parentId:p}=d,u=new Ct(d,o).categoryRowDto,g=`${i.endpointCategory}`;console.time(),await j("DELETE",g,u).then(async m=>{console.timeEnd();const{categoryDto:w,msg:v}=m;v==="OK"?(console.log("Category successfully deleted",{categoryRow:d}),await I().then(async()=>{const L={categoryKey:{topId:l,parentId:"",id:p},formMode:h.None};p?await N():await D(L).then(()=>{})})):a(v==="HasSubCategories"?{type:n.SET_ERROR,payload:{error:new Error("First remove sub categories"),whichRowId:w.Id}}:v==="HasQuestions"?{type:n.SET_ERROR,payload:{error:new Error("First remove category questions"),whichRowId:w.Id}}:{type:n.SET_ERROR,payload:{error:new Error(v),whichRowId:w.Id}})})}catch(l){return console.log(l),l}},[j,i.endpointCategory,D,I,N,o]),rt=async(d,l)=>{try{console.log("Deleting Category Tag...",{categoryKey:d,variationName:l}),console.log("Category Tag successfully deleted")}catch(p){console.log("error",p),a({type:n.SET_ERROR,payload:{error:p}})}},pe=12,it=x.useCallback(async({categoryKey:d,startCursor:l,includeQuestionId:p})=>{try{const{topId:u,id:g}=d;a({type:n.SET_CATEGORY_QUESTIONS_LOADING,payload:{}});try{const m=`${i.endpointQuestion}/${o}/${u}/${g}/${l}/${pe}/${p}`;console.time(),await j("GET",m).then(w=>{console.timeEnd();const{categoryDto:v}=w;if(v!==null){const L=new we(v).category;a({type:n.CATEGORY_QUESTIONS_LOADED,payload:{categoryRow:L}})}})}catch(m){console.log(m),a({type:n.SET_ERROR,payload:{error:m}})}}catch(u){console.log(u),a({type:n.SET_ERROR,payload:u})}},[j,i.endpointQuestion,o]),lt=x.useCallback(async(d,l)=>{try{const{topId:p,id:u}=d;let g=await G(u);if(!g){alert(`Not found ${u}. Reload all Categories`);return}const m={topId:p,parentId:d.id,id:"generateId",title:"question text",categoryTitle:g.title,numOfAssignedAnswers:0,included:!0},w={..._e,...m,title:""};if(console.assert(l),l){const v=C.topRows.find(B=>B.id===p),L=S(v,u);L.questionRows=[m,...L.questionRows],a({type:n.ADD_NEW_QUESTION_TO_ROW,payload:{categoryRow:L,newQuestionRow:m}}),a({type:n.SET_QUESTION,payload:{question:w,formMode:h.AddingQuestion}})}}catch(p){console.log("error",p),a({type:n.SET_ERROR,payload:{error:p}})}},[D,S,G,C.topRows]),dt=x.useCallback(async d=>{const{topId:l,id:p,parentId:u}=d;a({type:n.SET_LOADING_CATEGORY,payload:{}});try{d.created.nickName=E;const g=new qe(d,o).questionDto,m=`${i.endpointQuestion}`;console.time(),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> createQuestion",g),await j("POST",m,g).then(async w=>{if(console.timeEnd(),w){console.log("::::::::::::::::::::",{questionDtoEx:w});const{questionDto:v}=w;if(v){const L=new ce(v).question;L.topId=l,console.log("Question successfully created"),await I().then(async()=>{const W={categoryKey:{topId:l,parentId:u,id:u},formMode:h.EditingQuestion};await D(W).then(()=>{a({type:n.SET_QUESTION,payload:{formMode:h.EditingQuestion,question:L}})})})}}})}catch(g){console.log(g),a({type:n.SET_ERROR,payload:{error:new Error("Server Error"),whichRowId:p}})}},[j,i.endpointQuestion,D,I,E,o]),ct=x.useCallback(async(d,l,p)=>{const{id:u}=l;try{l.modified.nickName=E;const g=new qe(l,o).questionDto,m=`${i.endpointQuestion}`;console.time(),g.oldParentId=d,console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> updateQuestion",g);let w=null;return await j("PUT",m,g).then(async v=>{console.timeEnd();const{questionDto:L,msg:B}=v;if(L){w=new ce(L).question,console.log("Question successfully updated: ",w);const{topId:W,parentId:Z}=w;if(p){const{topId:de,parentId:re,id:Se}=w,Ee={topId:de,categoryId:re,questionId:Se};a({type:n.FORCE_OPEN_NODE,payload:{keyExpanded:Ee}})}else{const re={categoryKey:{topId:W,parentId:Z,id:Z},formMode:h.EditingQuestion};await D(re).then(()=>{a({type:n.SET_QUESTION,payload:{formMode:h.EditingQuestion,question:w}})})}}else a({type:n.SET_ERROR,payload:{error:new Error(B)}})}),w}catch(g){console.log(g),a({type:n.SET_ERROR,payload:{error:new Error("Server Error"),whichRowId:u}})}},[j,i.endpointQuestion,D,E,o]),ut=x.useCallback(async(d,l)=>{const{id:p,parentId:u,topId:g}=d;a({type:n.SET_LOADING_QUESTION,payload:{}});try{const m=new Rt(d,o).questionRowDto,w=`${i.endpointQuestion}`;console.time(),await j("DELETE",w,m).then(async v=>{const{questionDto:L}=v;if(console.timeEnd(),L){const B=new ce(L).question;console.log("Question successfully deleted"),l&&a({type:n.QUESTION_DELETED,payload:{question:B}});const Z={categoryKey:{topId:g,parentId:u,id:u},formMode:h.None};await D(Z).then(()=>{})}else console.error(v),a({type:n.SET_ERROR,payload:{error:new Error("Server Error"),whichRowId:p}})})}catch(m){console.log(m),a({type:n.SET_ERROR,payload:{error:new Error("Server Error"),whichRowId:p}})}},[j,i.endpointQuestion,D,o]),me=x.useCallback(async d=>new Promise(async l=>{try{const p=new Ce(d).toQuery(o),u=`${i.endpointQuestion}?${p}`;console.time(),console.log("getQuestion",d),await j("GET",u).then(g=>{console.timeEnd();const{questionDto:m,msg:w}=g;if(m){const v={question:new ce(m).question,msg:w};l(v)}else l({question:null,msg:w})})}catch(p){console.log(p),l({question:null,msg:"Problemos"})}}),[j,i.endpointQuestion,o]),gt=x.useCallback(async d=>{const l=new Ce(d).questionKey;a({type:n.SET_LOADING_QUESTION,payload:{}});const p=await me(l);f===h.AddingQuestion?await A():f===h.AddingCategory&&await K();const{question:u,msg:g}=p;u?(u.topId=d.topId,a({type:n.SET_QUESTION_TO_VIEW,payload:{question:u}})):a({type:n.SET_ERROR,payload:{error:new Error(g)}})},[K,A,f,me]),yt=x.useCallback(async d=>{const l=new Ce(d).questionKey;f===h.AddingQuestion?await A():f===h.AddingCategory&&await K(),a({type:n.SET_LOADING_QUESTION,payload:{}}),console.log("editQuestion:",l);const p=await me(l),{question:u,msg:g}=p;u?(u.topId=d.topId,a({type:n.CLOSE_QUESTION_FORM,payload:{question:u}}),a({type:n.SET_QUESTION_TO_EDIT,payload:{question:u}})):a({type:n.SET_ERROR,payload:{error:new Error(g)}})},[K,A,f,me]),pt=x.useCallback(async(d,l,p)=>{try{var{topId:u,id:g}=p,m={topId:u,id:g,created:{time:new Date,nickName:E}};const w=new Tt(m).assignedAnswerDto;w.QuestionKeyDto=new St(l,o).dto;let v=null;const L=`${i.endpointQuestionAnswer}/${d}`;console.time(),await j("POST",L,w).then(async B=>{console.timeEnd();const{questionDto:W}=B;console.log("::::::::::::::::::::",{questionDtoEx:B}),W&&(v=new ce(W).question,console.log("Question successfully modified"))}),v&&a({type:n.SET_QUESTION_AFTER_ASSIGN_ANSWER,payload:{question:v}})}catch(w){console.log("error",w),a({type:n.SET_ERROR,payload:{error:w}})}},[j,i.endpointQuestionAnswer,E,o]),mt=x.useCallback((d,l)=>{console.log("Provider onCategoryTitleChanged:",l),a({type:n.CATEGORY_TITLE_CHANGED,payload:{categoryRow:{...d,title:l}}})},[]),Et=x.useCallback((d,l,p)=>{const{parentId:u,id:g}=l,m=S(d,u);if(m){const w=m.questionRows.find(v=>v.id===g);w.title=p,console.log("onQuestionTitleChanged+++>>>",g,m),a({type:n.QUESTION_TITLE_CHANGED,payload:{categoryRow:m}})}},[S]),xt={state:C,loadAllCategoryRows:I,getSubCats:P,getCat:G,expandNodesUpToTheTree:V,loadTopRows:N,addSubCategory:_,cancelAddCategory:K,createCategory:ae,viewCategory:M,editCategory:te,updateCategory:H,deleteCategory:le,deleteCategoryVariation:rt,expandCategory:D,collapseCategory:ee,onCategoryTitleChanged:mt,loadCategoryQuestions:it,addQuestion:lt,cancelAddQuestion:A,createQuestion:dt,viewQuestion:gt,editQuestion:yt,updateQuestion:ct,deleteQuestion:ut,onQuestionTitleChanged:Et,assignQuestionAnswer:pt};return!s||!k||T===null?null:e.jsx(He.Provider,{value:xt,children:e.jsx(We.Provider,{value:a,children:t})})};function z(){return x.useContext(He)}const Ie=()=>x.useContext(We);var oe=(t=>(t.SET_LOADING="SET_LOADING",t.SET_SUB_CATS="SET_SUB_CATS",t.SET_ERROR="SET_ERROR",t.SET_EXPANDED="SET_EXPANDED",t.SET_PARENT_CAT="SET_PARENT_CAT",t))(oe||{});const Pt=({cat:t,dispatch:r,setParentCat:i,selId:s})=>{const{topId:o,parentId:c,id:y,title:E,level:C,isExpanded:a}=t,f={topId:o,parentId:c,id:y},R=F=>{r({type:oe.SET_EXPANDED,payload:{id:y,expanding:!a}})},O=F=>{i(F)},T=e.jsxs("div",{className:"d-flex justify-content-start align-items-center w-100 text-primary",children:[e.jsx(U,{variant:"link",size:"sm",className:"py-0 px-1",onClick:F=>{R(),F.stopPropagation(),F.preventDefault()},title:"Expand",children:e.jsx(se,{icon:a?Fe:$e,size:"lg"})}),e.jsx(U,{variant:"link",size:"sm",className:"py-0 mx-0 text-decoration-none",title:y,onClick:()=>O(t),children:E})]});return e.jsxs(e.Fragment,{children:[e.jsx(J.Item,{variant:"primary",className:"py-0 px-1 w-100",as:"li",children:T}),a&&e.jsx(J.Item,{className:"py-0 px-0",variant:"primary",as:"li",children:e.jsx(Je,{selId:s,level:C+1,categoryKey:f,setParentId:i})})]})},zt={loading:!1,parentId:null,title:"",cats:[]},Vt=(t,r)=>{switch(r.type){case oe.SET_LOADING:return{...t,loading:!0};case oe.SET_SUB_CATS:{const{subCats:i}=r.payload;return{...t,cats:t.cats.concat(i),loading:!1}}case oe.SET_ERROR:{const{error:i}=r.payload;return{...t,error:i,loading:!1}}case oe.SET_EXPANDED:{const{id:i,expanding:s}=r.payload;let{cats:o}=t;if(!s){const c=Xe(o,i);console.log("clean:",c),c.length>0&&(o=o.filter(y=>!c.includes(y.id)))}return{...t,cats:t.cats.map(c=>c.id===i?{...c,isExpanded:s}:c)}}case oe.SET_PARENT_CAT:{const{cat:i}=r.payload,{id:s,title:o}=i;return{...t,parentId:s,title:o}}default:return t}};function Xe(t,r){let i=t.filter(s=>s.parentId===r).map(s=>s.id);return i.forEach(s=>{const o=s?Xe(t,s):[];i=i.concat(o)}),i}const Je=({selId:t,categoryKey:r,level:i,setParentId:s})=>{const[o,c]=x.useReducer(Vt,zt),{getSubCats:y}=z(),{id:E}=r??{id:null},[C]=x.useState(r);x.useEffect(()=>{(async()=>{const R=await y(E),{subCats:O}=R;c({type:oe.SET_SUB_CATS,payload:{subCats:O}})})()},[y,C,E]);const a=o.cats.filter(R=>R.parentId===E),f=R=>{c({type:oe.SET_PARENT_CAT,payload:{cat:R}}),s(R)};return e.jsxs("div",{className:i>1?"border  border-7 ms-4 h-25":"border border-7  h-25",style:{overflowY:"auto"},children:[e.jsx(J,{as:"ul",variant:"dark",className:"mb-0",children:a.filter(R=>R.id!==t).map(R=>e.jsx(Pt,{cat:R,selId:t,dispatch:c,setParentCat:f},R.id))}),o.error&&o.error.message]})},Kt=({questionTitle:t,assignedAnswer:r,isDisabled:i,unAssignAnswer:s})=>{const{id:o,answerTitle:c,created:y}=r,{time:E,nickName:C}=y,a=localStorage.getItem("emailFromClient"),f=`Created by: ${C}, ${Ke(new Date(E))}`,{canEdit:R,isDarkMode:O}=ne(),T=!1,F=()=>{s(r)},q=V=>{console.log(`Selected Answer id=${V}`)},k=()=>{},[j,I]=x.useState(!1),G=()=>I(!1),P=V=>{navigator.clipboard&&navigator.clipboard.writeText(V).then(()=>{console.log("Copied to clipboard successfully."),alert("Answer copied to clipboard")},b=>{console.log("Failed to copy the text to clipboard.",b)})},[N,$]=ye(),S=e.jsxs("div",{ref:N,className:"d-flex justify-content-start align-items-center w-100 text-light bg-info",children:[e.jsx(U,{variant:"link",size:"sm",className:"py-0 px-0 text-info",onClick:()=>a?I(!0):P(c),children:e.jsx(se,{icon:a?At:It,size:"sm",title:"Send this Answer in a reply on Question"})}),e.jsx(U,{variant:"link",size:"sm",className:"py-0 mx-1 text-decoration-none text-white text-wrap",title:f,onClick:()=>q(o),disabled:T,children:c}),R&&!T&&$&&!i&&e.jsx(U,{variant:"link",size:"sm",className:"ms-1 py-0 mx-1 text-secondary",onClick:F,children:e.jsx(se,{icon:Re,size:"lg"})})]});return e.jsxs(J.Item,{variant:"info",className:"py-0 px-0",as:"li",children:[S,e.jsxs(Y,{show:j,onHide:G,animation:!0,centered:!0,size:"lg",className:`${O?"bg":""}`,contentClassName:`${O?"bg-info bg-gradient":""}`,children:[e.jsx(Y.Header,{closeButton:!0,children:"Send Answer in a reply on Question"}),e.jsx(Y.Body,{className:"py-0",children:e.jsx("table",{className:"table-info table-hover table-bordered w-100 h-100",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-top-0",children:[e.jsx("td",{children:"To:"}),e.jsx("td",{children:a})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Subject:"}),e.jsx("td",{children:t})]}),e.jsxs("tr",{className:"border-bottom-0",children:[e.jsx("td",{children:"Body:"}),e.jsx("td",{children:c})]})]})})}),e.jsxs(Y.Footer,{children:[e.jsx(U,{variant:"secondary",size:"sm",onClick:G,children:"Cancel"}),e.jsx(U,{variant:"primary",size:"sm",onClick:k,children:"Send E-Mail"})]})]})]},o)},Yt=({})=>e.jsx("span",{children:"Posle"}),Ht=({questionKey:t,questionTitle:r,assignedAnswers:i,isDisabled:s})=>{const{globalState:o,searchAnswers:c,loadAndCacheAllGroupRows:y}=ve(),{isDarkMode:E,variant:C,allGroupRows:a,allGroupRowsLoaded:f}=o,[R,O]=x.useState(!1),T=()=>O(!1),F=()=>{T()},{state:q,assignQuestionAnswer:k}=z(),[j,I]=x.useState(!1),G=async S=>{await k("Assign",t,S),I(!1)},P=async S=>{S&&await G({topId:S.topId,id:S.id}),T()},N=async S=>{await k("UnAssign",t,S)},$=async()=>{f||await y(),I(!0)};return e.jsxs("div",{className:"mx-0 my-0 px-1 py-1 border border-2 rounded-2 border-info bg-info",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-muted bg-info fs-6",children:"Assigned Answers"}),e.jsx(J,{as:"ul",variant:C,className:"my-1",children:i.map(S=>e.jsx(Kt,{questionTitle:r,assignedAnswer:S,groupInAdding:!1,isDisabled:s,unAssignAnswer:N},S.id))}),q.error&&e.jsx("div",{children:"state.error"})]}),e.jsxs("div",{className:"d-flex justify-content-start w-100 align-items-center py-1",children:[e.jsx(U,{size:"sm",className:"button-edit py-0 rounded-1",title:"Assign a new Answer",style:{border:"1px solid silver",fontSize:"12px"},variant:C,disabled:s,onClick:$,children:"Assign answer"}),e.jsx(U,{size:"sm",className:"button-edit py-0 rounded-1 mx-1",title:"Add and Assign a new Answer",style:{border:"1px solid silver",fontSize:"12px"},variant:C,disabled:s,onClick:async S=>{f||await y(),O(!0),S.preventDefault()},children:"Add a new answer"})]}),e.jsxs(Y,{show:R,onHide:T,animation:!0,centered:!0,size:"lg",className:"",contentClassName:`${E?"bg-info bg-gradient":""}`,children:[e.jsx(Y.Header,{closeButton:!0,children:e.jsx(Y.Title,{children:r})}),e.jsx(Y.Body,{children:e.jsx(Yt,{inLine:!0,closeModal:F,onAnswerCreated:P})})]}),e.jsxs(Y,{show:j,onHide:()=>I(!1),animation:!0,size:"lg",centered:!0,className:`${E?"dark":""}`,contentClassName:`${E?"dark":""}`,children:[e.jsx(Y.Header,{closeButton:!0,children:e.jsx(Y.Title,{children:"Assign the answer"})}),e.jsx(Y.Body,{style:{height:"40vh",width:"50vw"},className:"answers",children:e.jsx(Ot,{tekst:"tekst",onSelectAnswer:G,allGroupRows:a,searchAnswers:c})})]})]})},Wt=({relatedFilter:t})=>{const{filter:r,numOfUsages:i,created:s,lastUsed:o}=t,{time:c,nickName:y}=s,E=`Created by: ${y}, ${Ke(new Date(c))}`,C=!1,a=T=>{console.log("RelatedFilter onSelectAnswer",{filter:T})},[f,R]=ye(),O=e.jsxs("div",{ref:f,className:"d-flex justify-content-start align-items-center w-100 text-light related-filter-row",children:[e.jsx(U,{variant:"link",size:"sm",className:"py-0 mx-0 title text-light text-wrap",title:E,onClick:()=>a(r),disabled:C,children:r}),e.jsxs(Te,{pill:!0,bg:"secondary",className:`text-light ${i===0?"d-none":"d-inline"}`,children:[i,i===1?" usage":" usages"]}),e.jsx("span",{className:"small ms-1",children:Ft(o.time)}),R]});return e.jsx(J.Item,{className:"py-0 px-0",as:"li",children:O},r)},Xt=({relatedFilters:t})=>{const{globalState:r}=ve(),{variant:i}=r,{state:s}=z(),o=async c=>{console.log("RelatedFilters unAssignFilter",{relatedFilter:c})};return e.jsx("div",{className:"mx-0 my-1 border rounded-2 px-1 py-1border-light fs-6 related-filters",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-muted",children:"Most frequently selected Filters (as the next Question in ChatBot)"}),t.length>0?e.jsx(J,{as:"ul",variant:i,className:"my-1",children:t.map(c=>e.jsx(Wt,{relatedFilter:c,unAssignFilter:o},c.filter))}):e.jsx("div",{className:"border text-light",children:"No filters"}),s.error&&e.jsx("div",{children:"state.error"})]})})},Oe=({question:t,submitForm:r,children:i,showCloseButton:s,source:o=0,closeModal:c})=>{const{state:y,onQuestionTitleChanged:E}=z();let{formMode:C,topRows:a}=y;const f=C===h.ViewingQuestion,R=C===h.EditingQuestion,O=C===h.AddingQuestion,T=f,{topId:F,id:q,assignedAnswers:k,relatedFilters:j,title:I}=t,G=new Ce(t).questionKey,P=Ie(),N=()=>{c?c():P({type:n.CLOSE_QUESTION_FORM,payload:{question:t}})},$=()=>{c?c():P({type:n.CANCEL_QUESTION_FORM,payload:{question:t}})},[S,V]=x.useState(q+"/"+I),b=Be(S,500),[D]=x.useState(a.find(A=>A.id===F)),ee=x.useRef(null),_=Me({enableReinitialize:!0,initialValues:t,validationSchema:Ue().shape({title:je().required("Required"),parentId:je().required("Required").notOneOf(["000000000000000000000000"])}),onSubmit:A=>{r(A),V(A.id+"/"+A.title)}});x.useEffect(()=>{(async()=>{const M=b.split("/"),te=M[0];if(_.values.id===te){console.log("QuestionForm.useEffect - onQuestioTitleChanged",{debouncedSearchTerm:b,searchTerm:S,title:_.values.title});const H=M[1];await E(D,_.values,H)}})()},[b,_.values,E,S,D]),x.useEffect(()=>{ee.current.focus(),o!==0&&_.setFieldValue("source",o)},[_,ee,o]);const K=A=>{_.handleChange(A);const M=A.target.value;V(q+"/"+M)},ae=A=>{_.setFieldValue("parentId",A.id),_.setFieldValue("categoryTitle",A.title)};return console.log("@@@@@@@@@@@@@@@@@@@@@ QuestionForm.render: ",{searchTerm:S,qTitle:I,debouncedSearchTerm:b}),e.jsxs("div",{className:"form-wrapper px-3 py-1 my-0 my-1 w-100 question-form",children:[s&&e.jsx(Ge,{onClick:N,className:"float-end"}),e.jsx(ge,{className:"text-center",children:e.jsxs(Q.Label,{children:["Question  ",f?"Viewing":R?"Editing":"Adding"]})}),e.jsxs(Q,{onSubmit:_.handleSubmit,children:[e.jsxs(Ae,{direction:"horizontal",gap:0,className:"border",children:[e.jsx("div",{className:"p-0",children:e.jsx(Q.Label,{children:"Category:"})}),e.jsx("div",{className:"p-1",children:e.jsxs(Q.Group,{controlId:"parentId",className:"category-select form-select-sm w-90",children:[e.jsxs(fe,{children:[e.jsx(fe.Toggle,{variant:"light",id:"dropdown-basic",className:"px-2 py-0 text-primary border",disabled:T,children:e.jsx("span",{className:"text-wrap me-1",children:_.values.categoryTitle})}),e.jsx(fe.Menu,{className:"p-0 border",children:e.jsx(fe.Item,{className:"p-0 m-0 rounded-3",children:e.jsx(Je,{selId:_.values.parentId,categoryKey:null,level:1,setParentId:ae})})})]}),e.jsx(Q.Control,{as:"input",name:"parentId",onChange:_.handleChange,value:_.values.parentId?_.values.parentId:"",placeholder:"Category",className:"text-primary w-100",disabled:T,hidden:!0}),e.jsx(Q.Text,{className:"text-danger",children:_.touched.parentId&&_.errors.parentId?e.jsx("div",{className:"text-danger",children:_.errors.parentId?"required":""}):null})]})})]}),e.jsxs(Q.Group,{controlId:"title",children:[e.jsx(Q.Label,{children:"Title"}),e.jsx(Q.Control,{as:"textarea",name:"title",placeholder:_.values.title==="new Question"?"new Question":"question text",ref:ee,onChange:K,value:_.values.title,rows:3,className:"text-primary w-100",disabled:T}),e.jsx(Q.Text,{className:"text-danger",children:_.touched.title&&_.errors.title?e.jsx("div",{className:"text-danger",children:_.errors.title}):null})]}),e.jsxs(ge,{children:[e.jsx(ue,{children:e.jsxs(Q.Group,{controlId:"source",children:[e.jsx(Q.Label,{children:"Source"}),e.jsx(Ne,{id:"source",name:"source",options:Qt,onChange:(A,M)=>{A.preventDefault(),_.setFieldValue("source",M)},value:_.values.source,disabled:T,classes:"text-primary"}),e.jsx(Q.Text,{className:"text-danger",children:_.touched.source&&_.errors.source?e.jsx("div",{className:"text-danger",children:_.errors.source}):null})]})}),e.jsx(ue,{children:e.jsxs(Q.Group,{controlId:"status",children:[e.jsx(Q.Label,{children:"Status"}),e.jsx(Ne,{id:"status",name:"status",options:bt,onChange:(A,M)=>{A.preventDefault(),_.setFieldValue("status",M)},value:_.values.status,disabled:T,classes:"text-primary"}),e.jsx(Q.Text,{className:"text-danger",children:_.touched.status&&_.errors.status?e.jsx("div",{className:"text-danger",children:_.errors.status}):null})]})})]}),(f||R)&&e.jsxs("div",{className:"my-1",children:[e.jsx(Ht,{questionKey:G,questionTitle:S,assignedAnswers:k,isDisabled:T}),e.jsx(Xt,{questionKey:G,questionTitle:S,relatedFilters:j}),e.jsx(Pe,{created:t.created,modified:t.modified,classes:"text-primary"})]}),(_.dirty&&R||O)&&e.jsx(ze,{cancelForm:$,handleSubmit:_.handleSubmit,title:i}),y.error&&e.jsx("div",{className:"text-danger",children:y.error.message})]})]})},Qe=({closeModal:t,showCloseButton:r,source:i,setError:s})=>{const{state:o,cancelAddQuestion:c,createQuestion:y}=z(),{activeQuestion:E}=o,C=E?E.topId:"",a=async()=>{await c()},f=async R=>{const O={...R,topId:C,created:{time:new Date,nickName:""},modified:void 0},T=await y(O,t!==void 0);T&&(T.message?s(T.message):t&&t())};return E?e.jsx(Oe,{question:E,showCloseButton:r??!0,source:i??0,closeModal:a,submitForm:f,children:"Create Question"}):null},Ze=({})=>{const{state:t,updateQuestion:r}=z(),{activeQuestion:i}=t;if(!i)return null;if(!i)return e.jsx("div",{children:"Loading question to edit..."});const s=async o=>{const c={...o,created:void 0,modified:{time:new Date,nickName:""}},{parentId:y}=i,E=y!==c.parentId;await r(y,c,E)};return e.jsx(Oe,{question:i,showCloseButton:!0,source:0,submitForm:s,children:"Update Question"})},et=({inLine:t})=>{console.log(t?"ViewQuestion inLine":"ViewQuestion not inLine");const{state:r}=z(),{activeQuestion:i}=r,[s,o]=x.useState(null);return x.useEffect(()=>{console.log("#################################### ViewQuestion setQuestion ...",{activeQuestion:i}),o(i)},[i]),e.jsx(Oe,{question:s,showCloseButton:!0,source:0,submitForm:()=>{},children:"View Question"})},Jt=({questionRow:t,isSelected:r})=>{const{id:i,topId:s,parentId:o,title:c,numOfAssignedAnswers:y}=t,E={topId:s,parentId:o,id:o},{canEdit:C,authUser:a}=ne(),{state:f,viewQuestion:R,addQuestion:O,editQuestion:T,deleteQuestion:F}=z(),{activeQuestion:q,formMode:k,loadingQuestion:j,questionLoaded:I}=f,G=q!==null&&q.id===i,P=k===h.AddingQuestion,N=()=>{t.modified={time:new Date,nickName:a.nickName},F(t,G)},$=async D=>{console.log("QuestionRow onSelectQuestion",{id:D}),C?await T(t):await R(t)},[S,V]=ye();x.useEffect(()=>{(async()=>{if(r&&!j&&!I){switch(k){case h.ViewingQuestion:await R(t);break;case h.EditingQuestion:console.log("Zovem from QuestionRow"),C?await T(t):await R(t);break}document.getElementById(`QuestionRow${i}`)?.scrollIntoView({behavior:"smooth",block:"end"})}})()},[C,T,k,i,r,j,I,t,R]);const b=e.jsxs("div",{id:`QuestionRow${i}`,className:`d-relative d-flex justify-content-start align-items-center w-100 mt-1 question-row${r?"-selected":""}`,style:{marginTop:"1px"},children:[e.jsx(U,{variant:"link",size:"sm",className:"d-flex align-items-center px-1 text-secondary",children:e.jsx("img",{width:"22",height:"18",src:jt,alt:"Question"})}),e.jsx(U,{variant:"link",size:"sm",className:`p-0 px-1 m-1 ms-0 question-row-title ${G?"fw-bold":""}`,title:`id:${i.toString()}`,onClick:()=>$(i),disabled:P,children:c}),e.jsxs(Te,{pill:!0,bg:"secondary",className:`text-info ${y===0?"d-none":"d-inline"}`,children:[y,"a"]}),C&&!P&&V&&e.jsxs("div",{className:"position-absolute text-nowrap d-flex align-items-center border border-0 border-warning p-0 end-0",children:[e.jsx(U,{variant:"link",size:"sm",className:"ms-0 p-0 text-secondary",onClick:N,children:e.jsx(se,{icon:Re,size:"lg"})}),e.jsx(U,{variant:"link",size:"sm",className:"ms-1 p-0 text-secondary d-flex align-items-center",title:"Add Question",onClick:()=>{O(E,!0)},children:e.jsx("img",{width:"22",height:"18",src:Ve,alt:"Add Question"})})]})]});return e.jsxs(J.Item,{className:"py-0 px-0 w-100",as:"li",children:[r&&k===h.AddingQuestion&&e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"div-question",className:"ms-0 d-md-none w-100",children:e.jsx(Qe,{showCloseButton:!0,source:0})}),e.jsx("div",{ref:S,className:"d-none d-md-block  border rounded-3",children:b})]}),r&&k===h.EditingQuestion&&e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:S,className:"",children:b}),e.jsx("div",{id:"div-question",className:"ms-0 d-md-none w-100",children:e.jsx(Ze,{inLine:!0})})]}),r&&k===h.ViewingQuestion&&e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:S,className:"",children:b}),e.jsx("div",{ref:S,id:"div-question",className:"ms-0 d-md-none w-100",children:e.jsx(et,{inLine:!0})})]}),!r&&e.jsx("div",{ref:S,className:"",children:b})]})},tt=({categoryRow:t})=>{const{state:r,loadCategoryQuestions:i}=z(),{keyExpanded:s,loadingQuestion:o,error:c,selectedQuestionId:y}=r,{questionId:E}=s;t.level+=1;const{questionRows:C}=t;let a=!1;async function f(){try{const T={categoryKey:new ie(t).categoryKey,startCursor:C.length,includeQuestionId:E??null};console.log("^^^^^^^^^^^^^ loadMore"),console.log("^^^^^^^^^^^^^",{x:T}),console.log("^^^^^^^^^^^^^ loadMore"),await i(T)}catch{}finally{}}const[R,{rootRef:O}]=kt({loading:o,hasNextPage:a,onLoadMore:f,disabled:!!c,rootMargin:"0px 0px 100px 0px"});return e.jsxs("div",{ref:O,className:"ms-0",style:{maxHeight:"400px",overflowY:"auto"},children:[e.jsxs(Dt,{children:[C.length===0&&e.jsx("label",{children:"No questions"}),C.map(T=>e.jsx(Jt,{questionRow:T,isSelected:T.id===y},T.id)),a]}),c&&e.jsxs("p",{children:["Error: ",c.message]})]})},Zt=({categoryKey:t,tag:r,categoryInAdding:i})=>{const{name:s}=r,{canEdit:o}=ne(),{state:c,deleteCategoryVariation:y}=z(),E=()=>{y(t,s)},[C,a]=ye(),f=e.jsxs("div",{ref:C,children:[e.jsx(Te,{pill:!0,bg:"secondary",children:s}),o&&!0&&a&&e.jsx(U,{variant:"link",size:"sm",className:"ms-0 py-0 mx-0 text-secondary",onClick:E,children:e.jsx(se,{icon:Re,size:"sm"})}),!1]});return e.jsx("div",{className:"py-1 px-1",children:f})},eo=({categoryKey:t,variations:r})=>{const{state:i}=z(),{error:s}=i;return x.useEffect(()=>{},[]),e.jsxs("div",{className:"ms-2",children:[e.jsxs(Ae,{direction:"horizontal",gap:2,children:[r.length===0&&e.jsx("div",{children:"No variations"}),r.length>0&&r.map(o=>e.jsx(Zt,{categoryKey:t,tag:o,categoryInAdding:void 0}))]}),s&&e.jsxs("p",{children:["Error: ",s.message]})]})},be=({formMode:t,category:r,submitForm:i,children:s})=>{const{onCategoryTitleChanged:o}=z(),c=t===h.ViewingCategory,y=t===h.EditingCategory,E=t===h.AddingCategory,{topId:C,id:a,variations:f,questionRows:R,title:O}=r;console.log("CategoryForm render: ",{topId:C,id:a,catTitle:O,formMode:t});const T=new ie(r).categoryKey;document.getElementById("div-details");const F=R&&R.length>0,q=Ie(),k=()=>{q({type:n.CLOSE_CATEGORY_FORM,payload:{}})},j=()=>{q({type:n.CANCEL_CATEGORY_FORM,payload:{}})},[I,G]=x.useState(O),P=Be(I,300),N=Me({enableReinitialize:!0,initialValues:r,validationSchema:Ue().shape({title:je().required("Required")}),onSubmit:b=>{console.log("CategoryForm.onSubmit",JSON.stringify(b,null,2)),i(b),G(b.title)}});x.useEffect(()=>{(async()=>{console.log("CategoryForm.useEffect - onCategoryTitleChanged",{debouncedSearchTerm:P,title:N.values.title}),await o(N.values,P)})()},[P,N.values,o]);const $=b=>{N.handleChange(b);const D=b.target.value;G(D)},S=x.useRef(null);x.useEffect(()=>{S.current.focus()},[r.title,S]);const V=!1;return console.log("CategoryForm render return: ",I),e.jsxs("div",{className:"form-wrapper p-2 category-form",children:[e.jsx(Ge,{onClick:k,className:"float-end"}),e.jsx(ge,{className:"text-center text-muted",children:e.jsxs(Q.Label,{children:["Category ",c?"Viewing":y?"Editing":"Adding"]})}),e.jsxs(Q,{onSubmit:()=>N.handleSubmit,children:[e.jsx(Q.Group,{controlId:"Variations",children:e.jsxs(Ae,{direction:"horizontal",gap:1,children:[e.jsx("div",{className:"px-0",children:e.jsx(Q.Label,{children:"Variations:"})}),e.jsx("div",{className:"px-1 border border-1 border-secondary rounded",children:e.jsx(eo,{categoryKey:T,variations:f?f.map(b=>({name:b})):[]})}),e.jsx("div",{className:"ps-2",children:e.jsx(Q.Label,{children:"Kind:"})}),e.jsx("div",{className:"px-1 border border-1 border-secondary rounded",children:e.jsxs(Q.Group,{controlId:"kind",children:[e.jsx(Ne,{id:"kind",name:"kind",options:Lt,onChange:(b,D)=>{b.preventDefault(),N.setFieldValue("kind",D)},value:N.values.kind,disabled:V,classes:"text-primary"}),e.jsx(Q.Text,{className:"text-danger",children:N.touched.kind&&N.errors.kind?e.jsx("div",{className:"text-danger",children:N.errors.kind}):null})]})})]})}),e.jsxs(Q.Group,{controlId:"title",children:[e.jsx(Q.Label,{children:"Title"}),e.jsx(Q.Control,{as:"textarea",name:"title",placeholder:N.values.title==="new Category"?"new Category":"category text",value:I,onChange:$,ref:S,rows:3,className:"text-primary w-100",disabled:c}),e.jsx(Q.Text,{className:"text-danger",children:N.touched.title&&N.errors.title?e.jsx("div",{className:"text-danger",children:N.errors.title}):null})]}),e.jsxs(Q.Group,{controlId:"link",children:[e.jsx(Q.Label,{children:"Link"}),N.values.hasSubCategories?e.jsx(Q.Control,{as:"input",placeholder:"/categories/...",name:"link",onChange:N.handleChange,className:"text-primary w-100",value:"Can't have link (has sub categories)",disabled:!0}):e.jsxs(e.Fragment,{children:[e.jsx(Q.Control,{as:"input",placeholder:"/categories/...",name:"link",onChange:N.handleChange,className:"text-primary w-100",value:N.values.link??"",disabled:c}),e.jsx(Q.Text,{className:"text-danger",children:N.touched.link&&N.errors.link?e.jsx("div",{className:"text-danger",children:N.errors.link}):null})]})]}),e.jsxs(Q.Group,{children:[e.jsxs(Q.Label,{className:"m-1 mb-0",children:["Questions (",`${N.values.numOfQuestions}`,") "]}),F&&e.jsx(tt,{categoryRow:r})]}),(c||y)&&e.jsx(Pe,{created:r.created,modified:r.modified,classes:"text-primary"}),(N.dirty&&y||E)&&e.jsx(ze,{cancelForm:j,handleSubmit:N.handleSubmit,title:s})]})]})},ot=({inLine:t})=>{const r=ne(),{nickName:i}=r.authUser,{state:s,updateCategory:o}=z(),{activeCategory:c,keyExpanded:y}=s,{questionId:E}=y,C=async a=>{const f={...a,created:void 0,modified:{time:new Date,nickName:i}};await o(f,!0)};return e.jsx(be,{inLine:t,category:{...c},questionId:E,formMode:h.EditingCategory,submitForm:C,children:"Update Category"})},st=({inLine:t})=>{const{state:r}=z(),{activeCategory:i,keyExpanded:s}=r,{questionId:o}=s;return e.jsx(be,{inLine:t,category:{...i},questionId:o,formMode:h.ViewingCategory,submitForm:()=>{},children:"View Category"})},nt=({activeCategory:t})=>{const r=ne(),{nickName:i}=r.authUser,{createCategory:s}=z(),[o]=x.useState({...t}),c=async y=>{const E={...y,created:{time:new Date,nickName:i},modified:void 0};console.log("**********object",E),await s(E)};return!t===null?null:(console.log("AddCategory render >>>>>:",t),e.jsx(e.Fragment,{children:e.jsx(be,{inLine:!1,category:o,questionId:null,formMode:h.AddingCategory,submitForm:c,children:"Create Category"})}))},to=({categoryRow:t,questionId:r})=>{const{id:i,title:s,hasSubCategories:o,numOfQuestions:c,isExpanded:y}=t;t.level+=1;const E=new ie(t).categoryKey,{canEdit:C,authUser:a}=ne(),{state:f,addSubCategory:R,viewCategory:O,editCategory:T,deleteCategory:F,expandCategory:q,collapseCategory:k,addQuestion:j}=z();let{formMode:I,activeCategory:G,loadingCategory:P,categoryLoaded:N}=f;const $=G!==null&&G.id===i,S=I===h.AddingCategory,V=y&&c>0,b=()=>{t.modified={time:new Date,nickName:a.nickName},F(t)},D=async()=>{if(y)await k(t);else{const le={categoryKey:E,byClick:!0,formMode:C?h.EditingCategory:h.ViewingCategory};await q(le)}},ee=async()=>{C?await T(t,r??"null"):await O(t,r??"null")},[_,K]=x.useState(!1);x.useEffect(()=>{_&&(R(t),K(!1))},[R,t,_]);const[ae,A]=x.useState(!1);x.useEffect(()=>{ae&&(j(E,y??!1),A(!1))},[j,E,y,ae]),x.useEffect(()=>{(async()=>{if($&&!P&&!N&&!S)switch(console.log("CategoryRow formMode:",I),I){case h.ViewingCategory:await O(t,r??"null");break;case h.EditingCategory:C?await T(t,r??"null"):await O(t,r??"null");break}})()},[C,E,N,t,T,q,I,S,$,P,r,O]);const[M,te]=ye(),H=e.jsxs("div",{children:[e.jsxs("div",{id:`Row${i}`,className:`d-relative d-flex justify-content-start align-items-center w-100 mt-1 category-row${$?"-selected":""}`,style:{marginTop:"1px"},children:[e.jsx(U,{variant:"link",size:"sm",className:"py-0 px-1",onClick:le=>{D(),le.stopPropagation()},title:"Expand",disabled:S||!o&&c===0,children:e.jsx(se,{icon:y?Fe:$e,size:"lg"})}),e.jsx(U,{variant:"link",size:"sm",className:"py-0 px-1 bg-light",title:"Expand",disabled:!0,children:e.jsx(se,{icon:qt,size:"sm"})}),e.jsx(U,{variant:"link",size:"sm",className:`py-0 ms-0 me-1 category-row-title ${$?"fw-bold text-white bg-transparent":""}`,title:i,onClick:ee,disabled:S,children:s}),c>0&&e.jsxs(Te,{pill:!0,bg:"secondary",className:"d-inline bg-transparent",children:[c,"Q"]}),C&&te&&e.jsxs("div",{className:"position-absolute text-nowrap d-flex align-items-center border border-0 border-warning p-0 end-0",children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx(U,{variant:"link",size:"sm",className:"border-0 py-0 px-0 ms-0 text-success",title:"Add SubCategory",onClick:async()=>{!y&&(o||c>0)&&await D(),setTimeout(()=>K(!0),500)},children:e.jsx(se,{icon:Gt,size:"lg"})})}),!S&&!o&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(U,{variant:"link",size:"sm",className:"d-flex align-items-center border border-0 border-warning p-0",disabled:o||c>0,onClick:b,children:e.jsx(se,{icon:Re,size:"lg"})}),e.jsx(U,{variant:"link",size:"sm",className:"p-0 mx-0 text-secondary d-flex align-items-center border border-0 border-warning1",title:"Add Question",onClick:async()=>{!y&&(o||c>0)&&await D(),setTimeout(()=>A(!0),500)},children:e.jsx("img",{width:"22",height:"18",src:Ve,alt:"Add Question"})})]})]})]}),V&&e.jsx("div",{className:"ps-3",children:e.jsx(tt,{categoryRow:t})})]});return e.jsxs(e.Fragment,{children:[e.jsxs(J.Item,{className:"py-0 px-1 w-100 category-bg",as:"li",children:[$&&I===h.AddingCategory&&e.jsxs("div",{children:[e.jsx("div",{ref:M,className:"",children:H}),e.jsx("div",{className:"ms-0 d-md-none w-100",children:e.jsx(nt,{activeCategory:G})})]}),$&&I===h.EditingCategory&&e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:M,className:"",children:H}),e.jsx("div",{id:"divInLine",className:"ms-0 d-md-none w-100",children:e.jsx(ot,{inLine:!1})})]}),$&&I===h.ViewingCategory&&e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:M,className:"",children:H}),e.jsx("div",{id:"divInLine",className:"ms-0 d-md-none w-100",children:e.jsx(st,{inLine:!1})})]}),!$&&e.jsx("div",{ref:M,className:"",children:H})]}),f.error&&f.whichRowId===i&&e.jsx("div",{className:"text-danger",children:f.error.message}),y&&e.jsx(J.Item,{className:"py-0 px-0 border-0 border-warning border-bottom-0 category-bg",variant:"primary",as:"li",children:y&&e.jsx(e.Fragment,{children:o&&e.jsx(at,{categoryRow:t,title:s,isExpanded:y})})})]})},at=({categoryRow:t,title:r})=>{const{state:i}=z();let{keyExpanded:s}=i;const{questionId:o}=s??{questionId:null};let c=1,y=[];return r==="ROOT"?y=i.topRows:(y=t.categoryRows,c=t.level),e.jsx("div",{className:c>1?"ms-2":"",children:e.jsx(J,{as:"ul",variant:"dark",className:"mb-0 category-bg",children:y.map(E=>e.jsx(to,{categoryRow:E,questionId:o},E.id))})})},oo=t=>{const{isDarkMode:r}=ne(),[i,s]=x.useState("");return x.useEffect(()=>{},[]),e.jsxs(Y,{show:t.show,onHide:t.onHide,animation:!0,centered:!0,size:"lg",className:"modal show",contentClassName:`${r?"bg-secondary bg-gradient":"bg-info bg-gradient"}`,children:[e.jsx(Y.Header,{closeButton:!0,children:"Store new Question to the Database"}),e.jsx(Y.Body,{className:"py-0",children:e.jsx(Qe,{closeModal:t.onHide,showCloseButton:!1,source:1,setError:o=>s(o)})}),e.jsx(Y.Footer,{children:i})]})},so=x.lazy(()=>vt(()=>import("./AutoSuggestQuestions-BACKsPf7.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.AutoSuggestQuestions}))),no=({categoryId_questionId:t,fromChatBotDlg:r})=>{const{state:i,expandNodesUpToTheTree:s,loadTopRows:o,addSubCategory:c}=z(),{allCategoryRows:y,topRows:E,topRowsLoading:C,topRowsLoaded:a,keyExpanded:f,categoryId_questionId_done:R,nodeOpening:O,nodeOpened:T,activeCategory:F,activeQuestion:q,formMode:k,loadingCategories:j,loadingCategory:I,loadingQuestions:G,loadingQuestion:P}=i,{searchQuestions:N,setLastRouteVisited:$}=ve(),{isDarkMode:S}=ne(),[V,b]=x.useState(!1),[D,ee]=x.useState({..._e}),_=Ie(),K=async A=>{_({type:n.SET_QUESTION_SELECTED,payload:{questionKey:A}})};let ae="";return x.useEffect(()=>{(async()=>!C&&!a&&(console.log("ZOVEM 111 loadTopRows()"),await o()))()},[C,a,o]),x.useEffect(()=>{(async()=>{if(!O&&E.length>0){if(t){if(t==="add_question"){const A=localStorage.getItem("New_Question");if(A){const M=JSON.parse(A);return ee({..._e,categoryTitle:"Select",...M}),b(!0),localStorage.removeItem("New_Question"),null}}else if(t!==R){const A=t.split("_"),M=A[0],te=A[1],H={topId:"",id:M,parentId:"ROOT"};console.log("zovem expandNodesUpToTheTree 1111111111111111111)",{categoryId_questionId:t},{categoryId_questionId_done:R}),await s(H,te,r??"false").then(()=>null)}}else if(f&&!T){const{topId:A,categoryId:M,questionId:te}=f;if(M!==""){const H={topId:A,id:M,parentId:"ROOT"};console.log("zovem expandNodeUpToTheTree 2222222222222)",{keyExpanded:f,catKey:H}),await s(H,te).then(()=>null)}}}})()},[f,O,T,s,t,R,E,r]),x.useEffect(()=>{$("/categories")},[$]),t!=="add_question"&&t&&t!==R?(console.log("zzzzzz loading...",{keyExpanded:f,categoryId_questionId:t,categoryId_questionId_done:R}),e.jsx("div",{children:"loading..."})):!a||E.length===0?(console.log("===>>> Categories  VRATIO"),null):(console.log("===>>> Categories !!!!!!!!!!!!!!!!!",F),e.jsxs(e.Fragment,{children:[e.jsxs(_t,{children:[e.jsxs("h5",{className:"text-warning mx-auto w-75 fw-bold",children:[e.jsx("span",{className:"categories",children:"Categories / "}),e.jsx("span",{className:"questions",children:"Questions"})]}),e.jsx(ge,{className:`${S?"dark":""}`,children:e.jsx(ue,{children:e.jsx("div",{className:"d-flex justify-content-start align-items-center",children:e.jsx("div",{className:"w-75 my-1 questions",children:e.jsx(x.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(so,{tekst:ae,onSelectQuestion:K,allCategoryRows:y,searchQuestions:N})})})})})}),e.jsx(U,{variant:"secondary",size:"sm",type:"button",style:{padding:"1px 4px"},onClick:()=>c(null),children:"Add Category"}),e.jsxs(ge,{className:"my-1 h-auto",children:[e.jsx(ue,{xs:12,md:5,children:e.jsx("div",{className:"categories-border",style:{position:"relative"},children:e.jsx(at,{categoryRow:null,title:"ROOT",isExpanded:!0})})}),e.jsx(ue,{xs:0,md:7,children:e.jsxs("div",{id:"div-details",className:"d-none d-md-block",children:[F&&k===h.ViewingCategory&&e.jsx(st,{inLine:!1}),F&&k===h.EditingCategory&&e.jsx(ot,{inLine:!1}),F&&k===h.AddingCategory&&e.jsx(nt,{activeCategory:F}),q&&k===h.ViewingQuestion&&e.jsx(et,{inLine:!1}),q&&k===h.EditingQuestion&&e.jsx(Ze,{inLine:!1}),q&&k===h.AddingQuestion&&e.jsx(Qe,{})]})})]})]}),V&&q&&e.jsx(oo,{show:V,onHide:()=>{b(!1)},newQuestionRow:D}),(j||G)&&e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{position:"absolute",top:"40%",left:"20%"},children:e.jsx("div",{className:`spinner-border ${G?"question":"category"}-spinner`,role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),I&&e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{position:"absolute",top:"50%",left:"50%"},children:e.jsx("div",{className:"spinner-border category-spinner",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),P&&e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{position:"absolute",top:"50%",left:"50%"},children:e.jsx("div",{className:"spinner-border question-spinner",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})]}))},co=()=>{let{categoryId_questionId:t,fromChatBotDlg:r}=Nt();if(t&&t==="categories"&&(t=void 0),t){const i=t.split("_");console.assert(i.length===2,"expected 'categoryId_questionId'")}return e.jsx(Ut,{children:e.jsx(no,{categoryId_questionId:t,fromChatBotDlg:r})})};export{co as default};
//# sourceMappingURL=Categories-BQSBfIt1.js.map
