{"version":3,"file":"AutoSuggestAnswers-D15fl0gP.js","sources":["../../src/groups/AutoSuggestAnswers.tsx"],"sourcesContent":["import React, { type JSX } from 'react';\r\nimport Autosuggest from 'react-autosuggest';\r\nimport AutosuggestHighlightMatch from \"autosuggest-highlight/match\";\r\nimport AutosuggestHighlightParse from \"autosuggest-highlight/parse\";\r\n\r\nimport { isMobile } from 'react-device-detect'\r\n\r\nimport { debounce, escapeRegexCharacters } from '@/common/utilities'\r\nimport './AutoSuggestAnswers.css'\r\nimport { type IGroupRow, type IAnswerKey, type IAnswerRow, AnswerKey } from '@/groups/types';\r\n\r\n\r\ninterface ICatMy {\r\n\tid: string,\r\n\tparentGroupUp: string,\r\n\tgroupParentTitle: string,\r\n\tgroupTitle: string,\r\n\tanswerRows: IAnswerRow[]\r\n}\r\n\r\ninterface ICatSection {\r\n\tid: string | null,\r\n\tgroupTitle: string,\r\n\tparentGroupUp: string,\r\n\tgroupParentTitle: string, // TODO ???\r\n\tanswerRows: IAnswerRow[]\r\n}\r\n\r\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Regular_Expression\r\n// s#Using_Special_Characters\r\n// function escapeRegexCharacters(str: string): string {\r\n// \treturn str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n// }\r\n\r\n// autoFocus does the job\r\n//let inputAutosuggest = createRef<HTMLInputElement>();\r\n// interface ICatIdTitle {\r\n// \tid: string;\r\n// \ttitle: string;\r\n// }\r\n\r\nconst AnswerAutosuggestMulti = Autosuggest as { new(): Autosuggest<IAnswerRow, ICatMy> };\r\n\r\nexport class AutoSuggestAnswers extends React.Component<{\r\n\ttekst: string | undefined,\r\n\tonSelectAnswer: (answerKey: IAnswerKey, underFilter: string) => void,\r\n\tallGroupRows: Map<string, IGroupRow>,\r\n\tsearchAnswers: (filter: string, count: number) => Promise<IAnswerRow[]>\r\n}, any> {\r\n\t// region Fields\r\n\tstate: any;\r\n\tisMob: boolean;\r\n\tallGroupRows: Map<string, IGroupRow>;\r\n\tsearchAnswers: (filter: string, count: number) => Promise<IAnswerRow[]>;\r\n\tdebouncedLoadSuggestions: (value: string) => void;\r\n\t//inputAutosuggest: React.RefObject<HTMLInputElement>;\r\n\t// endregion region Constructor\r\n\tconstructor(props: any) {\r\n\t\tconsole.log(\"AutoSuggestAnswers CONSTRUCTOR\")\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tvalue: props.tekst || '',\r\n\t\t\tsuggestions: [], //this.getSuggestions(''),\r\n\t\t\tnoSuggestions: false,\r\n\t\t\thighlighted: ''\r\n\t\t};\r\n\t\t//this.inputAutosuggest = createRef<HTMLInputElement>();\r\n\t\tthis.allGroupRows = props.allGroupRows;\r\n\t\tthis.searchAnswers = props.searchAnswers;\r\n\t\tthis.isMob = isMobile;\r\n\t\tthis.loadSuggestions = this.loadSuggestions.bind(this);\r\n\t\tthis.debouncedLoadSuggestions = debounce(this.loadSuggestions, 300);\r\n\t}\r\n\r\n\r\n\tasync loadSuggestions(value: string) {\r\n\t\tthis.setState({\r\n\t\t\tisLoading: true\r\n\t\t});\r\n\r\n\t\tconsole.time();\r\n\t\tconst suggestions = await this.getSuggestions(value);\r\n\t\tconsole.timeEnd();\r\n\r\n\t\tif (value === this.state.value) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLoading: false,\r\n\t\t\t\tsuggestions,\r\n\t\t\t\tnoSuggestions: suggestions.length === 0\r\n\t\t\t});\r\n\t\t}\r\n\t\telse { // Ignore suggestions if input value changed\r\n\t\t\tthis.setState({\r\n\t\t\t\tisLoading: false\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tsetTimeout(() => {\r\n\t\t\twindow.focus()\r\n\t\t\t// inputAutosuggest!.current!.focus();\r\n\t\t}, 300)\r\n\t}\r\n\r\n\t// endregion region Rendering methods\r\n\trender(): JSX.Element {\r\n\t\tconst { value, suggestions, noSuggestions } = this.state;\r\n\r\n\t\treturn <div>\r\n\t\t\t<AnswerAutosuggestMulti\r\n\t\t\t\tonSuggestionsClearRequested={this.onSuggestionsClearRequested}  // (sl) added\r\n\t\t\t\tmultiSection={true}\r\n\t\t\t\tsuggestions={suggestions}\r\n\t\t\t\tonSuggestionsFetchRequested={this.onSuggestionsFetchRequested.bind(this)}\r\n\t\t\t\tonSuggestionSelected={this.onSuggestionSelected.bind(this)}\r\n\t\t\t\tgetSuggestionValue={this.getSuggestionValue}\r\n\t\t\t\trenderSuggestion={this.renderSuggestion}\r\n\t\t\t\trenderSectionTitle={this.renderSectionTitle}\r\n\t\t\t\tgetSectionSuggestions={this.getSectionSuggestions}\r\n\t\t\t\t// onSuggestionHighlighted={this.onSuggestionHighlighted} (sl)\r\n\t\t\t\tonSuggestionHighlighted={this.onSuggestionHighlighted.bind(this)}\r\n\t\t\t\thighlightFirstSuggestion={false}\r\n\t\t\t\trenderInputComponent={this.renderInputComponent}\r\n\t\t\t\t// renderSuggestionsContainer={this.renderSuggestionsContainer}\r\n\t\t\t\tfocusInputOnSuggestionClick={!this.isMob}\r\n\t\t\t\tinputProps={{\r\n\t\t\t\t\tplaceholder: `Type 'remote'`,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tonChange: (e, changeEvent) => this.onChange(e, changeEvent),\r\n\t\t\t\t\tautoFocus: true\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t{noSuggestions &&\r\n\t\t\t\t<div className=\"no-suggestions\">\r\n\t\t\t\t\tNo answers to suggest\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t</div>\r\n\t}\r\n\r\n\r\n\t// private satisfyingCategories = (searchWords: string[]): ICatIdTitle[] => {\r\n\t// \tconst arr: ICatIdTitle[] = [];\r\n\t// \tsearchWords.filter(w => w.length >= 3).forEach(w => {\r\n\t// \t\tthis.allGroupRows.forEach(async cat => {\r\n\t// \t\t\t//const parentId = cat.id;\r\n\t// \t\t\t//let j = 0;\r\n\t// \t\t\t// cat.words.forEach(catw => {\r\n\t// \t\t\t// \tif (catw.includes(w)) {\r\n\t// \t\t\t// \t\tconsole.log(\"Add all answers of group\")\r\n\t// \t\t\t// \t\tarr.push({ id: cat.id, title: cat.title })\r\n\t// \t\t\t// \t}\r\n\t// \t\t\t// })\r\n\t// \t\t})\r\n\t// \t})\r\n\t// \treturn arr;\r\n\t// }\r\n\r\n\tprotected async getSuggestions(search: string): Promise<ICatSection[]> {\r\n\t\tconst escapedValue = escapeRegexCharacters(search.trim());\r\n\t\tif (escapedValue === '') {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tif (search.length < 3)\r\n\t\t\treturn [];\r\n\t\tconst catSection = new Map<string | null, IAnswerRow[]>();\r\n\t\tconst answerKeys: IAnswerKey[] = [];\r\n\t\ttry {\r\n\t\t\tconsole.log('--------->>>>> getSuggestions')\r\n\t\t\tvar answerRows: IAnswerRow[] = await this.searchAnswers(escapedValue, 10);\r\n\t\t\tanswerRows.forEach((answerRow: IAnswerRow) => {\r\n\t\t\t\tconsole.log('answerRow', answerRow);\r\n\t\t\t\tconst { topId, parentId, id, title, included } = answerRow;\r\n\t\t\t\tconst answerKey = new AnswerKey(answerRow).answerKey!;\r\n\t\t\t\tif (!answerKeys.includes(answerKey)) {\r\n\t\t\t\t\tanswerKeys.push(answerKey);\r\n\r\n\t\t\t\t\t// 2) Group answers by parentId\r\n\t\t\t\t\tconst row: IAnswerRow = {\r\n\t\t\t\t\t\ttopId,\r\n\t\t\t\t\t\tparentId,\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tgroupTitle: '',\r\n\t\t\t\t\t\tincluded\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!catSection.has(parentId)) {\r\n\t\t\t\t\t\tcatSection.set(parentId, [row]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tcatSection.get(parentId)!.push(row);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tcatch (error: any) {\r\n\t\t\tconsole.debug(error)\r\n\t\t};\r\n\r\n\t\t////////////////////////////////////////////////////////////////////////////////\r\n\t\t// Search for Categories title words, and add all the answers of the Group\r\n\t\t/*\r\n\t\tif (answerKeys.length === 0) {\r\n\t\t\ttry {\r\n\t\t\t\tconst tx = this.dbp!.transaction('Answers')\r\n\t\t\t\tconst index = tx.store.index('parentGroup_idx');\r\n\t\t\t\tconst catIdTitles = this.satisfyingCategories(searchWords)\r\n\t\t\t\tlet i = 0;\r\n\t\t\t\twhile (i < catIdTitles.length) {\r\n\t\t\t\t\tconst catIdTitle = catIdTitles[i];\r\n\t\t\t\t\tconst parentId = catIdTitle.id;\r\n\t\t\t\t\tfor await (const cursor of index.iterate(parentId)) {\r\n\t\t\t\t\t\tconst q: IAnswer = cursor.value;\r\n\t\t\t\t\t\tconst { id, title } = q;\r\n\t\t\t\t\t\t//if (!answerRows.includes(id!))\r\n\t\t\t\t\t\t//\tanswerRows.push(id!);\r\n\r\n\t\t\t\t\t\tconst answerKey = { parentId, id }\r\n\t\t\t\t\t\tif (!answerKeys.includes(answerKey)) {\r\n\t\t\t\t\t\t\tanswerKeys.push(answerKey);\r\n\r\n\t\t\t\t\t\t\t//console.log(q);\r\n\t\t\t\t\t\t\t// 2) Group answers by parentId\r\n\t\t\t\t\t\t\tconst quest: IAnswerRow = {\r\n\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\tparentId,\r\n\t\t\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\t\t\tgroupTitle: catIdTitle.title\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!catQuests.has(parentId)) {\r\n\t\t\t\t\t\t\t\tcatQuests.set(parentId, [quest]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tcatQuests.get(parentId)!.push(quest);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait tx.done;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (error: any) {\r\n\t\t\t\tconsole.debug(error)\r\n\t\t\t};\r\n\t\t}\r\n\t\tawait tx.done;\r\n\t\t*/\r\n\r\n\t\tif (answerKeys.length === 0)\r\n\t\t\treturn [];\r\n\r\n\t\ttry {\r\n\t\t\t////////////////////////////////////////////////////////////\r\n\t\t\t// map\r\n\t\t\t// 0 = {'DALJINSKI' => IAnswerRow[2]}\r\n\t\t\t// 1 = {'EDGE2' => IAnswerRow[3]}\r\n\t\t\t// 2 = {'EDGE3' => IAnswerRow[4]}4\r\n\r\n\t\t\t////////////////////////////////////////////////////////////\r\n\t\t\t// \r\n\t\t\tlet catSections: ICatSection[] = [];\r\n\t\t\tcatSection.forEach((quests, id) => {\r\n\t\t\t\t//let variationsss: string[] = [];\r\n\t\t\t\tconst catSection: ICatSection = {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tgroupTitle: '',\r\n\t\t\t\t\tgroupParentTitle: 'kuro',\r\n\t\t\t\t\tparentGroupUp: '',\r\n\t\t\t\t\tanswerRows: []\r\n\t\t\t\t};\r\n\t\t\t\tif (id !== null) {\r\n\t\t\t\t\tconst cat = this.allGroupRows.get(id);\r\n\t\t\t\t\tif (cat) {\r\n\t\t\t\t\t\tconst { title, titlesUpTheTree/*, variations*/ } = cat!;\r\n\t\t\t\t\t\tcatSection.groupTitle = title;\r\n\t\t\t\t\t\tcatSection.parentGroupUp = titlesUpTheTree!;\r\n\t\t\t\t\t\t//variationsss = variations;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\talert(`${id} Not found in allCats`)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t}\r\n\t\t\t\t// const catSection: ICatSection = {\r\n\t\t\t\t// \tid: id,\r\n\t\t\t\t// \tgroupTitle: title,\r\n\t\t\t\t// \tgroupParentTitle: 'kuro',\r\n\t\t\t\t// \tparentGroupUp: titlesUpTheTree!,\r\n\t\t\t\t// \tanswerRows: []\r\n\t\t\t\t// };\r\n\t\t\t\tquests.forEach(quest => {\r\n\t\t\t\t\t// console.log(quest);\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tif (variationsss.length > 0) {\r\n\t\t\t\t\t\tlet wordsIncludesTag = false;\r\n\t\t\t\t\t\t// searchWords.forEach(w => {\r\n\t\t\t\t\t\t// \tvariationsss.forEach(variation => {\r\n\t\t\t\t\t\t// \t\tif (variation === w.toUpperCase()) {\r\n\t\t\t\t\t\t// \t\t\twordsIncludesTag = true;\r\n\t\t\t\t\t\t// \t\t\tcatSection.quests.push({ ...quest, title: quest.title + ' ' + variation });\r\n\t\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t\tif (!wordsIncludesTag) {\r\n\t\t\t\t\t\t\t// variationsss.forEach(variation => {\r\n\t\t\t\t\t\t\t// \t// console.log(quest);\r\n\t\t\t\t\t\t\t// \tcatSection.answerRows.push({ ...quest, title: quest.title + ' ' + variation });\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tcatSection.answerRows.push(quest);\r\n\t\t\t\t\t/*}*/\r\n\t\t\t\t});\r\n\t\t\t\tcatSections.push(catSection);\r\n\t\t\t\t//console.log(catSections)\r\n\t\t\t});\r\n\t\t\treturn catSections;\r\n\t\t}\r\n\t\tcatch (error: any) {\r\n\t\t\tconsole.log(error)\r\n\t\t};\r\n\t\treturn [];\r\n\t}\r\n\r\n\r\n\tprotected onSuggestionsClearRequested = () => {\r\n\t\tthis.setState({\r\n\t\t\tsuggestions: [],\r\n\t\t\tnoSuggestions: false\r\n\t\t});\r\n\t};\r\n\r\n\tprotected onSuggestionSelected(event: React.FormEvent<any>, data: Autosuggest.SuggestionSelectedEventData<IAnswerRow>): void {\r\n\t\tevent.preventDefault(); // ?\r\n\t\tconst answer: IAnswerRow = data.suggestion;\r\n\t\tconst { topId, parentId, id } = answer;\r\n\t\t// alert(`Selected answer is ${answer.answerId} (${answer.text}).`);\r\n\t\tthis.props.onSelectAnswer({ topId, parentId, id }, this.state.value);\r\n\t}\r\n\r\n\t/*\r\n\tprotected renderSuggestion(suggestion: Answer, params: Autosuggest.RenderSuggestionParams): JSX.Element {\r\n\t\t const className = params.isHighlighted ? \"highlighted\" : undefined;\r\n\t\t return <span className={className}>{suggestion.name}</span>;\r\n\t}\r\n\t*/\r\n\r\n\t// TODO bac ovo u external css   style={{ textAlign: 'left'}}\r\n\tprotected renderSuggestion(suggestion: IAnswerRow, params: Autosuggest.RenderSuggestionParams): JSX.Element {\r\n\t\t// const className = params.isHighlighted ? \"highlighted\" : undefined;\r\n\t\t//return <span className={className}>{suggestion.name}</span>;\r\n\t\tconst matches = AutosuggestHighlightMatch(suggestion.title, params.query);\r\n\t\tconst parts = AutosuggestHighlightParse(suggestion.title, matches);\r\n\t\treturn (\r\n\t\t\t<span className=\"d-inline-block text-truncate\" style={{ textAlign: 'left' }}>\r\n\t\t\t\t{parts.map((part, index) => {\r\n\t\t\t\t\tconst cls = part.highlight ? 'react-autosuggest__suggestion-match' : undefined;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span key={index} className={`${cls ?? ''}`}>\r\n\t\t\t\t\t\t\t{part.text}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n\r\n\tprotected renderSectionTitle(section: ICatMy): JSX.Element {\r\n\t\tconst { parentGroupUp } = section; // , groupParentTitle, groupTitle\r\n\t\t// let str = (groupParentTitle ? (groupParentTitle + \" / \") : \"\") + groupTitle;\r\n\t\t// if (parentGroupUp)\r\n\t\t// \tstr = \" ... / \" + str;\r\n\t\treturn <span>{parentGroupUp}</span>\r\n\t\t// <strong>\r\n\t\t//{parentGroupUp}\r\n\t\t// </strong>;\r\n\t}\r\n\r\n\t// protected renderInputComponent(inputProps: Autosuggest.InputProps<IAnswerShort>): JSX.Element {\r\n\t// \t const { onChange, onBlur, ...restInputProps } = inputProps;\r\n\t// \t return (\r\n\t// \t\t  <div>\r\n\t// \t\t\t\t<input {...restInputProps} />\r\n\t// \t\t  </div>\r\n\t// \t );\r\n\t// }\r\n\r\n\tprotected renderInputComponent(inputProps: Autosuggest.RenderInputComponentProps): JSX.Element {\r\n\t\tconst { ref, ...restInputProps } = inputProps;\r\n\t\t// if (ref !== undefined)\r\n\t\t// \tthis.inputAutosuggest = ref as React.RefObject<HTMLInputElement>;\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{/* <input {...restInputProps} ref={inputAutosuggest} /> */}\r\n\t\t\t\t<input ref={ref} autoFocus {...restInputProps} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t// const Input = forwardRef<HTMLInputElement, Omit<InputProps, \"ref\">>(\r\n\t// \t(props: Omit<InputProps, \"ref\">, ref): JSX.Element => (\r\n\t// \t  <input {...props} ref={ref} />\r\n\t// \t)\r\n\t//   );\r\n\r\n\t// protected renderSuggestionsContainer({ containerProps, children, query }:\r\n\t// \tAutosuggest.RenderSuggestionsContainerParams): JSX.Element {\r\n\t// \treturn (\r\n\t// \t\t<div {...containerProps}>\r\n\t// \t\t\t<span>{children}</span>\r\n\t// \t\t</div>\r\n\t// \t);\r\n\t// }\r\n\t// endregion region Event handlers\r\n\r\n\r\n\r\n\tprotected onChange(event: /*React.ChangeEvent<HTMLInputElement>*/ React.FormEvent<any>, { newValue }: Autosuggest.ChangeEvent): void {\r\n\t\tevent.preventDefault(); // ?\r\n\t\tthis.setState({ value: newValue });\r\n\t}\r\n\r\n\t// getParentTitle = async (id: string): Promise<any> => {\r\n\t// \tlet group = await this.dbp.get('Categories', id);\r\n\t// \treturn { parentGroupTitle: group.title, parentGroupUp: '' };\r\n\t// }\r\n\r\n\tprotected async onSuggestionsFetchRequested({ value }: any): Promise<void> {\r\n\t\treturn /*await*/ this.debouncedLoadSuggestions(value);\r\n\t}\r\n\r\n\t// private anyWord = (valueWordRegex: RegExp[], answerWords: string[]): boolean => {\r\n\t// \tfor (let valWordRegex of valueWordRegex)\r\n\t// \t\tfor (let answerWord of answerWords)\r\n\t// \t\t\tif (valWordRegex.test(answerWord))\r\n\t// \t\t\t\treturn true;\r\n\t// \treturn false;\r\n\t// }\r\n\r\n\t////////////////////////////////////\r\n\t// endregion region Helper methods\r\n\r\n\tprotected getSuggestionValue(suggestion: IAnswerRow) {\r\n\t\treturn suggestion.title;\r\n\t}\r\n\r\n\tprotected getSectionSuggestions(section: ICatMy) {\r\n\t\treturn section.answerRows;\r\n\t}\r\n\r\n\tprotected onSuggestionHighlighted(params: Autosuggest.SuggestionHighlightedParams): void {\r\n\t\tthis.setState({\r\n\t\t\thighlighted: params.suggestion\r\n\t\t});\r\n\t}\r\n\t// endregion\r\n}"],"names":["AnswerAutosuggestMulti","Autosuggest","AutoSuggestAnswers","React","props","isMobile","debounce","value","suggestions","noSuggestions","jsx","e","changeEvent","search","escapedValue","escapeRegexCharacters","catSection","answerKeys","answerRows","answerRow","topId","parentId","id","title","included","answerKey","AnswerKey","row","error","catSections","quests","cat","titlesUpTheTree","quest","event","data","answer","suggestion","params","matches","AutosuggestHighlightMatch","parts","AutosuggestHighlightParse","part","index","cls","section","parentGroupUp","inputProps","ref","restInputProps","newValue"],"mappings":"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"}