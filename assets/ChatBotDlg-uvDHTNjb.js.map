{"version":3,"file":"ChatBotDlg-uvDHTNjb.js","sources":["../../src/hooks/useAI.tsx","../../src/ChatBotDlgNavigator.tsx","../../src/ChatBotDlg.tsx"],"sourcesContent":["import { useCallback, useState } from \"react\";\r\n\r\nimport type { IAssignedAnswer, IQuestion, IQuestionKey } from '@/categories/types';\r\nimport { type IWhoWhen } from \"@/global/types\";\r\n\r\nexport interface IChatBotAnswer {\r\n  questionKey?: IQuestionKey;\r\n  topId: string;\r\n  id: string;\r\n  answerTitle: string;\r\n  answerLink: string | null;\r\n  created: IWhoWhen,\r\n  modified: IWhoWhen | null\r\n}\r\n\r\nclass ChatBotAnswer {\r\n  constructor(assignedAnswer: IAssignedAnswer) {\r\n    const { topId, id, answerTitle, answerLink } = assignedAnswer; // , created, modified\r\n    this.chatBotAnswer = {\r\n      topId,\r\n      id,\r\n      answerTitle: answerTitle ?? '',\r\n      answerLink: answerLink ?? '',\r\n      created: assignedAnswer.created!,\r\n      modified: assignedAnswer.modified!\r\n    }\r\n  }\r\n  chatBotAnswer: IChatBotAnswer\r\n}\r\n\r\n\r\nexport interface INewQuestion {\r\n  firstChatBotAnswer: IChatBotAnswer | null;\r\n  hasMoreAnswers: boolean;\r\n}\r\n\r\nexport interface INextAnswer {\r\n  nextChatBotAnswer: IChatBotAnswer | null; //undefined;\r\n  hasMoreAnswers: boolean;\r\n}\r\n\r\nexport const useAI = (/*categories: ICategory[]*/): [\r\n  (question: IQuestion) => Promise<INewQuestion>,\r\n  () => Promise<IQuestion | null>,\r\n  () => Promise<INextAnswer>] => {\r\n\r\n\r\n  const [question, setQuestion] = useState<IQuestion | null>(null);\r\n  const [index, setIndex] = useState<number>(0);\r\n\r\n  const setNewQuestion = async (q: IQuestion): Promise<INewQuestion> => {\r\n    setQuestion(q);\r\n    let hasMoreAnswers = false;\r\n    let firstChatBotAnswer: IChatBotAnswer | null = null;\r\n    if (q) {\r\n      const { assignedAnswers } = q;\r\n      if (assignedAnswers && assignedAnswers.length > 0) {\r\n        const assignedAnswer = assignedAnswers[0];\r\n        firstChatBotAnswer = new ChatBotAnswer(assignedAnswer).chatBotAnswer;\r\n        hasMoreAnswers = assignedAnswers.length > 1;\r\n        setIndex(0);\r\n      }\r\n    }\r\n    return { firstChatBotAnswer, hasMoreAnswers };\r\n  }\r\n\r\n  const getCurrQuestion = useCallback(\r\n    async (): Promise<IQuestion | null> => {\r\n      return question\r\n    }, [question]);\r\n\r\n\r\n  const getNextChatBotAnswer = useCallback(\r\n    async (): Promise<INextAnswer> => {\r\n      const { assignedAnswers } = question!;\r\n      const len = assignedAnswers.length;\r\n      const i = index + 1;\r\n      if (index + 1 < len) {\r\n        setIndex(i);\r\n        return {\r\n          nextChatBotAnswer: new ChatBotAnswer(assignedAnswers[i]).chatBotAnswer,\r\n          hasMoreAnswers: i + 1 < len\r\n        }\r\n      }\r\n      return { nextChatBotAnswer: null, hasMoreAnswers: false }\r\n    }, [question, index]);\r\n\r\n  return [setNewQuestion, getCurrQuestion, getNextChatBotAnswer]\r\n  // useCallback(setNewQuestion, []), \r\n  // useCallback(getCurrQuestion, [question]), \r\n  // useCallback(getNextChatBotAnswer, [question])\r\n}\r\n","import { forwardRef, useImperativeHandle, useState } from 'react';\r\nimport { Accordion } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n// import { faFolder } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport { type ICategoryRow } from '@/categories/types';\r\n\r\n//import Q from '@/assets/Q.png';\r\n//import A from '@/assets/A.png';\r\nimport type { AccordionEventKey } from 'react-bootstrap/esm/AccordionContext';\r\nimport type { IChatBotDlgNavigatorMethods } from './global/types';\r\n// import { useCategoryDispatch } from '@/categories/CategoryProvider';\r\n\r\n\r\n//const PINK = 'rgba(255, 192, 203, 0.6)';\r\n//const BLUE = 'rgb(224, 207, 252)';\r\n\r\nconst ChatBotDlgNavigator = forwardRef<IChatBotDlgNavigatorMethods, { allCategoryRows: ICategoryRow[] }>(\r\n    ({ allCategoryRows }, ref) => {\r\n\r\n        const navigate = useNavigate();\r\n        // const linkGo = (link: string) => {\r\n        //     navigate(link);\r\n        // }\r\n\r\n        const [topRows, setTopRows] = useState<ICategoryRow[]>([]);\r\n\r\n        /*\r\n        function ContextAwareToggle({ children, eventKey, hasSubCategories, isExpanded, callback }:\r\n            { children: ReactNode; eventKey: AccordionEventKey; hasSubCategories: boolean; isExpanded: boolean, callback?: (eventKey?: AccordionEventKey) => void }) {\r\n\r\n            const { activeEventKey } = useContext(AccordionContext);\r\n            const decoratedOnClick = useAccordionButton(\r\n                String(eventKey ?? ''),\r\n                () => callback && callback(eventKey),\r\n            );\r\n            const isCurrentEventKey = activeEventKey === eventKey;\r\n            return (\r\n                <Button\r\n                    type=\"button\"\r\n                    //className={`${isExpanded ? '' : 'collapsed'} accordion-button${!hasSubCategories ? ' hide-icon' : ''}`}\r\n                    className={`${!hasSubCategories ? ' hide-icon' : ''}`}\r\n                    style={{\r\n                        backgroundColor: isCurrentEventKey ? PINK : BLUE\r\n                    }}\r\n                    onClick={decoratedOnClick}\r\n                >\r\n                    {children}\r\n                </Button>\r\n            );\r\n        }\r\n        */\r\n\r\n        const CatRow = ({ row }: { row: ICategoryRow }) => {\r\n            const { id, hasSubCategories, title, link } = row;\r\n            return (\r\n                <Accordion.Item eventKey={id}>\r\n                    <Accordion.Header className={`${!hasSubCategories ? 'hide-icon' : ''}`}>\r\n                        {/* <ContextAwareToggle eventKey={row.id} hasSubCategories={row.hasSubCategories} isExpanded={row.isExpanded ? true : false}> */}\r\n                            {row.link\r\n                                ? <a href=\"#\" className=\"cat-link\" onClick={() => navigate(`${link}/from_chat`)}>{title}</a>\r\n                                : <span className=\"cat-title\">{title}</span>\r\n                            }\r\n                        {/* </ContextAwareToggle> */}\r\n                    </Accordion.Header>\r\n                    <Accordion.Body>\r\n                        {/* <Card.Body> */}\r\n                            {row.hasSubCategories &&\r\n                                <CatList rows={row.categoryRows} />\r\n                            }\r\n                        {/* </Card.Body> */}\r\n                    </Accordion.Body>\r\n                    {/* <Accordion.Collapse eventKey={row.id}>\r\n                        <Card.Body>\r\n                            {row.hasSubCategories &&\r\n                                <CatList rows={row.categoryRows} />\r\n                            }\r\n                        </Card.Body>\r\n                    </Accordion.Collapse> */}\r\n                </Accordion.Item>\r\n            )\r\n        }\r\n\r\n        const CatList = ({ rows }: { rows: ICategoryRow[] }) => {\r\n            return (\r\n                <>\r\n                    {rows.map((row) => (\r\n                        <CatRow key={row.id} row={row} />\r\n                    ))}\r\n                </>\r\n            )\r\n        }\r\n\r\n        const onSelectCategory = async (eventKey: AccordionEventKey, e: React.SyntheticEvent<unknown>) => {\r\n            const id = eventKey![0];\r\n            const cat = allCategoryRows.find(x => id === x.id);\r\n            if (cat) {\r\n                //cat.isExpanded = !cat.isExpanded;\r\n                //e.stopPropagation();\r\n                //e.preventDefault();\r\n            }\r\n            console.log('onSelectCategory', { cat, eventKey, e });\r\n        }\r\n\r\n        //////////////////\r\n        const loadSubTree = async (categoryRow: ICategoryRow): Promise<boolean> => {\r\n            const { id } = categoryRow;\r\n            allCategoryRows.forEach(async (row) => {\r\n                if (row.id !== id && row.parentId === id) {\r\n                    await loadSubTree(row);\r\n                    categoryRow.categoryRows.push(row);\r\n                }\r\n            });\r\n            return true;\r\n        };\r\n\r\n        //////////////////\r\n        const resetNavigator = (): void => {\r\n            setTopRows([]);\r\n            allCategoryRows.forEach(async (categoryRow) => {\r\n                categoryRow.categoryRows = [];\r\n                if (categoryRow.parentId === null) {\r\n                    await loadSubTree(categoryRow);\r\n                    setTopRows(prevTopRows => [...prevTopRows, categoryRow]);\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n        useImperativeHandle(ref, () => ({\r\n            resetNavigator\r\n        }), []);\r\n\r\n        return (\r\n            <Accordion defaultActiveKey=\"\" alwaysOpen={true} onSelect={onSelectCategory} >\r\n                <CatList rows={topRows}></CatList>\r\n            </Accordion>\r\n        );\r\n    });\r\n\r\nexport default ChatBotDlgNavigator;","import { useState, useRef, useEffect } from 'react';\r\nimport { Container, Row, Col, Button, Offcanvas } from \"react-bootstrap\";\r\n//import { useNavigate } from \"react-router-dom\";\r\n\r\nimport { useGlobalContext, useGlobalState } from '@/global/GlobalProvider';\r\n\r\nimport { useParams } from 'react-router-dom' // useRouteMatch\r\nimport { AutoSuggestQuestions } from '@/categories/AutoSuggestQuestions';\r\n\r\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n// import { faFolder } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport { type ICategoryRow, type IQuestion, type IQuestionEx, type IQuestionKey, QuestionKey } from '@/categories/types';\r\nimport type { IChatBotDlgNavigatorMethods, IHistory, IHistoryFilter } from '@/global/types';\r\nimport { type IChatBotAnswer, type INewQuestion, type INextAnswer, useAI } from '@/hooks/useAI'\r\n\r\nimport Q from '@/assets/Q.png';\r\nimport A from '@/assets/A.png';\r\nimport ChatBotDlgNavigator from './ChatBotDlgNavigator';\r\n// import { useCategoryDispatch } from '@/categories/CategoryProvider';\r\n\r\ntype ChatBotParams = {\r\n    source: string;\r\n    tekst: string;\r\n    email?: string;\r\n};\r\n\r\n\r\ninterface IProps {\r\n    show: boolean,\r\n    onHide: () => void;\r\n}\r\n\r\nconst ChatBotDlg = ({ show, onHide }: IProps) => {\r\n    let { tekst } = useParams<ChatBotParams>();\r\n    const [autoSuggestionValue, setAutoSuggestionValue] = useState(tekst!)\r\n    const [setNewQuestion, getCurrQuestion, getNextChatBotAnswer] = useAI(/*[]*/);\r\n    const [selectedQuestion, setSelectedQuestion] = useState<IQuestion | null>(null);\r\n    const [autoSuggestId, setAutoSuggestId] = useState<number>(1);\r\n    const [showAnswer, setShowAnswer] = useState(false);\r\n    const [chatBotAnswer, setChatBotAnswer] = useState<IChatBotAnswer | null>(null);\r\n    const [hasMoreAnswers, setHasMoreAnswers] = useState<boolean>(false);\r\n    const [allCategoryRowsLoaded, setAllCategoryRowsLoaded] = useState<boolean>(false);\r\n\r\n\r\n    const { loadAllCategoryRowsGlobal, getQuestion, addHistory, addHistoryFilter, searchQuestions } = useGlobalContext();\r\n    const { authUser, isDarkMode } = useGlobalState();\r\n    //const navigate = useNavigate();\r\n\r\n    const [catsSelected] = useState(true);\r\n    const [showAutoSuggest, setShowAutoSuggest] = useState(true); //false);\r\n\r\n\r\n    const [allCategoryRows, setAllCategoryRows] = useState<Map<string, ICategoryRow>>(new Map<string, ICategoryRow>());\r\n    const [allCategoryRows2, setAllCategoryRows2] = useState<ICategoryRow[]>([]);\r\n    const childRef = useRef<IChatBotDlgNavigatorMethods | null>(null);\r\n\r\n    const [pastEvents, setPastEvents] = useState<IChild[]>([]);\r\n\r\n    enum ChildType {\r\n        AUTO_SUGGEST,\r\n        QUESTION,\r\n        ANSWER\r\n    }\r\n\r\n    interface IChild {\r\n        type: ChildType;\r\n        isDisabled: boolean;\r\n        txt: string,\r\n        link: string | null,\r\n        hasMoreAnswers?: boolean\r\n    }\r\n    // const deca: JSX.Element[] = [];\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (!allCategoryRowsLoaded) {\r\n                const allCategoryRows = await loadAllCategoryRowsGlobal();\r\n                if (allCategoryRows) {\r\n                    setAllCategoryRowsLoaded(true);\r\n                    setAllCategoryRows(allCategoryRows);\r\n                    setAllCategoryRows2(Array.from(allCategoryRows.values()));\r\n                }\r\n            }\r\n        })()\r\n    }, [allCategoryRowsLoaded, loadAllCategoryRowsGlobal]);\r\n\r\n\r\n\r\n    const onEntering = async (/*node: HTMLElement, isAppearing: boolean*/): Promise<any> => {\r\n        const startTime = performance.now();\r\n        await childRef?.current?.resetNavigator();\r\n        // const rows = await childRef?.current?.getTopRows();\r\n        // setTopRows(rows || []);\r\n        const endTime = performance.now();\r\n        const elapsedTime = endTime - startTime;\r\n        console.log(`Execution time: ${elapsedTime} milliseconds`);\r\n    }\r\n\r\n    const scrollableRef = useRef<HTMLDivElement>(null);\r\n\r\n    // useEffect(() => {\r\n    //     scrollToBottom();\r\n    // }, []);\r\n\r\n    // const AutoSuggestQuestions = lazy(() =>\r\n    //     // named export\r\n    //     import(\"@/categories/AutoSuggestQuestions\").then((module) => ({ default: module.AutoSuggestQuestions }))\r\n    // );\r\n\r\n    const onSelectQuestion = async (questionKey: IQuestionKey, underFilter: string) => {\r\n        const questionCurr = await getCurrQuestion();\r\n        if (questionCurr) {\r\n            console.log({ questionCurr })\r\n            const historyFilter: IHistoryFilter = {\r\n                questionKey: new QuestionKey(questionCurr).questionKey!,\r\n                filter: underFilter,\r\n                created: { time: new Date(), nickName: authUser.nickName }\r\n            }\r\n            await addHistoryFilter(historyFilter);\r\n        }\r\n        // navigate(`/categories/${categoryId}_${questionId.toString()}`)\r\n        // const question = await getQuestion(questionId);\r\n\r\n        // salji kasnije kad klikne na Fixed\r\n        /* TODO proveri\r\n        if (answer) {\r\n            const history: IHistory = {\r\n                questionId: questionKey.id,\r\n                answerId: answer.id,\r\n                fixed: undefined,\r\n                created: { \r\n                    nickName: authUser.nickName, \r\n                    time: new Date() \r\n                }\r\n            }\r\n            addHistory(history);\r\n        }\r\n        */\r\n        if (chatBotAnswer) {\r\n            const props: IChild = {\r\n                type: ChildType.ANSWER,\r\n                isDisabled: true,\r\n                txt: chatBotAnswer.answerTitle,\r\n                link: chatBotAnswer.answerLink\r\n            }\r\n            setPastEvents((prevEvents) => [...prevEvents, props]);\r\n        }\r\n\r\n        const questionEx: IQuestionEx = await getQuestion(questionKey);\r\n        const { question } = questionEx;\r\n        if (!question) {\r\n            //alert(questionEx.msg)\r\n            return;\r\n        }\r\n        if (question.numOfRelatedFilters > 0) {\r\n            setAutoSuggestionValue(question.relatedFilters[0].filter)\r\n        }\r\n\r\n        const res: INewQuestion = await setNewQuestion(question);\r\n        let { firstChatBotAnswer, hasMoreAnswers } = res; // as unknown as INewQuestion;\r\n\r\n        if (question) {\r\n            const props: IChild = {\r\n                type: ChildType.QUESTION,\r\n                isDisabled: true,\r\n                txt: question.title,\r\n                link: null\r\n            }\r\n            setPastEvents((prevEvents) => [...prevEvents, props]);\r\n        }\r\n\r\n        setAutoSuggestId((autoSuggestId) => autoSuggestId + 1);\r\n        setShowAutoSuggest(false);\r\n        setSelectedQuestion(question);\r\n        setShowAnswer(true);\r\n        setHasMoreAnswers(hasMoreAnswers);\r\n        //setAnswerId((answerId) => answerId + 1);\r\n        setChatBotAnswer(firstChatBotAnswer);\r\n        // // salji kasnije kad klikne na Fixed\r\n        // if (firstAnswer) {\r\n        // \taddHistory(dbp, {\r\n        // \t\tconversation: conv,\r\n        // \t\tclient: authUser.nickName,\r\n        // \t\tquestionId: question!.id!,\r\n        // \t\tanswerId: firstAnswer.id!,\r\n        // \t\tfixed: undefined,\r\n        // \t\tcreated: new Date()\r\n        // \t})\r\n        // }\r\n    }\r\n\r\n    const onAnswerFixed = async () => {\r\n        const props: IChild = {\r\n            type: ChildType.ANSWER,\r\n            isDisabled: true,\r\n            txt: chatBotAnswer ? chatBotAnswer.answerTitle : 'no answer title',\r\n            link: chatBotAnswer ? chatBotAnswer.answerLink : 'no answer link',\r\n            hasMoreAnswers: true\r\n        }\r\n        setPastEvents((prevHistory) => [...prevHistory, props]);\r\n\r\n        const history: IHistory = {\r\n            questionKey: new QuestionKey(selectedQuestion!).questionKey!,\r\n            assignedAnswerKey: { topId: chatBotAnswer!.topId, id: chatBotAnswer!.id },\r\n            userAction: 'Fixed',\r\n            created: {\r\n                nickName: authUser.nickName,\r\n                time: new Date()\r\n            }\r\n        }\r\n        addHistory(history);\r\n\r\n        //\r\n        // TODO logic \r\n        //\r\n\r\n        setHasMoreAnswers(false);\r\n        //setAnswerId((answerId) => answerId + 1);\r\n        setChatBotAnswer(chatBotAnswer); //undefined);\r\n        setShowAnswer(false);\r\n    }\r\n\r\n    const getNextAnswer = async () => {\r\n        // past events\r\n        const props: IChild = {\r\n            type: ChildType.ANSWER,\r\n            isDisabled: true,\r\n            txt: chatBotAnswer ? chatBotAnswer.answerTitle : 'no answer',\r\n            link: chatBotAnswer ? chatBotAnswer.answerLink : 'no link',\r\n            hasMoreAnswers: true\r\n        }\r\n        setPastEvents((prevHistory) => [...prevHistory, props]);\r\n\r\n        const next: INextAnswer = await getNextChatBotAnswer();\r\n        const { nextChatBotAnswer, hasMoreAnswers } = next;\r\n\r\n        if (chatBotAnswer) {\r\n            const history: IHistory = {\r\n                questionKey: new QuestionKey(selectedQuestion!).questionKey!,\r\n                assignedAnswerKey: { topId: chatBotAnswer.topId, id: chatBotAnswer.id },\r\n                userAction: nextChatBotAnswer ? 'NotFixed' : 'NotClicked',\r\n                created: {\r\n                    nickName: authUser.nickName,\r\n                    time: new Date()\r\n                }\r\n            }\r\n            addHistory(history);\r\n        }\r\n\r\n        // salji gore\r\n        // if (nextAnswer) {\r\n        // \taddHistory(dbp, {\r\n        // \t\tconversation,\r\n        // \t\tclient: authUser.nickName,\r\n        // \t\tquestionId: selectedQuestion!.id!,\r\n        // \t\tanswerId: nextAnswer.id!,\r\n        // \t\tfixed: hasMoreAnswers ? undefined : false,\r\n        // \t\tcreated: new Date()\r\n        // \t})\r\n        // }\r\n        setHasMoreAnswers(hasMoreAnswers);\r\n        //setAnswerId((answerId) => answerId + 1); PPP\r\n        console.log('----->>>>', { nextChatBotAnswer })\r\n        setChatBotAnswer(nextChatBotAnswer);\r\n    }\r\n\r\n    /*const NavigLink = (link: string) => {\r\n        //dispatch({ type: ActionTypes.RESET_CATEGORY_QUESTION_DONE })\r\n        //dispatch({ type: ActionTypes.CLEAN_SUB_TREE, payload: { categoryKey: null } });\r\n        // new CategoryKey(parentCat).categoryKey } });\r\n        setTimeout(() => {\r\n            navigate(link + \"/true\")\r\n        }, 100);\r\n    }\r\n    */\r\n\r\n\r\n    const QuestionComponent = (props: IChild) => {\r\n        const { txt } = props;\r\n        return (\r\n            <div id={autoSuggestId.toString()} className=\"d-flex flex-row mx-0 justify-content-start align-items-center\">\r\n                <div className=\"d-flex flex-row mx-0 justify-content-start align-items-center\">\r\n                    <img width=\"22\" height=\"18\" src={Q} alt=\"Question\" className='ms-1' />\r\n                    <div className=\"p-1 bg-warning text-light flex-wrap text-wrap border rounded-1\">{txt}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const AnswerComponent = (props: IChild) => {\r\n        console.log('--------------------------------------AnswerComponent', props)\r\n        const { isDisabled, txt, link } = props;\r\n        return (\r\n            <div\r\n                // id={answerId.toString()}   PPP\r\n                id={chatBotAnswer?.id}\r\n                className={`${isDarkMode ? \"dark\" : \"light\"} mt-1 mx-1 border border-0 rounded-1`}\r\n            >\r\n                {/* <Row>\r\n                    <Col xs={12} md={12} className={`${isDisabled ? 'secondary' : 'primary'} d-flex justify-content-start align-items-center p-0`}> */}\r\n\r\n                <div className=\"d-flex flex-row mx-0 justify-content-start align-items-center\">\r\n                    <div className=\"d-flex flex-row mx-0 justify-content-start align-items-center\">\r\n                        <img width=\"22\" height=\"18\" src={A} alt=\"Answer\" className='ms-1' />\r\n                        {link\r\n                            ? <div className=\"p-1 bg-info text-light flex-wrap text-wrap border rounded-1 \">\r\n                                <a\r\n                                    href={link!}\r\n                                    rel=\"noopener noreferrer\"\r\n                                    target=\"_blank\"\r\n                                    className=\"text-light text-decoration-underline\"\r\n                                >\r\n                                    {txt}\r\n                                </a>\r\n                            </div>\r\n                            : <div className=\"p-1 bg-info text-light flex-wrap text-wrap border rounded-1\">\r\n                                {txt}\r\n                            </div>\r\n\r\n                        }\r\n                    </div>\r\n\r\n                    {!isDisabled && chatBotAnswer &&\r\n                        <div>\r\n                            <Button\r\n                                size=\"sm\"\r\n                                type=\"button\"\r\n                                onClick={onAnswerFixed}\r\n                                disabled={!chatBotAnswer}\r\n                                className='align-middle ms-1 px-1  py-0'\r\n                                variant=\"success\"\r\n                            >\r\n                                Fixed\r\n                            </Button>\r\n                            <Button\r\n                                size=\"sm\"\r\n                                type=\"button\"\r\n                                onClick={getNextAnswer}\r\n                                disabled={!chatBotAnswer}\r\n                                className='align-middle ms-1 border border-1 rounded-1 px-1 py-0'\r\n                                variant=\"danger\"\r\n                            >\r\n                                Not fixed\r\n                            </Button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                {/* <div className=\"d-flex flex-row flex-wrap mx-0\"> */}\r\n                {/* <div className=\"card card-block  bg-info text-light\">\r\n                                <div className=\"card-body p-0\">\r\n                                    <div className=\"card-text d-flex justify-content-start align-items-center\">\r\n                                        \r\n                                        \r\n                                        {link ? <a href={link} target=\"_blank\" className=\"text-reset text-decoration-none fw-lighter fs-6\" >{link}</a> : null}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"card card-block  border-0\">\r\n                                <div className=\"card-body p-0 border-0\">\r\n                                    <div className=\"card-text\">\r\n                                        {!isDisabled && chatBotAnswer &&\r\n                                            <div>\r\n                                                <Button\r\n                                                    size=\"sm\"\r\n                                                    type=\"button\"\r\n                                                    onClick={onAnswerFixed}\r\n                                                    disabled={!chatBotAnswer}\r\n                                                    className='align-middle ms-1 p-0'\r\n                                                    variant=\"success\"\r\n                                                >\r\n                                                    Fixed\r\n                                                </Button>\r\n                                                <Button\r\n                                                    size=\"sm\"\r\n                                                    type=\"button\"\r\n                                                    onClick={getNextAnswer}\r\n                                                    disabled={!chatBotAnswer}\r\n                                                    className='align-middle ms-1 border border-1 rounded-1 p-0'\r\n                                                    variant=\"danger\"\r\n                                                >\r\n                                                    Not fixed\r\n                                                </Button>\r\n                                            </div>\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            </div> */}\r\n\r\n                {/* </div> */}\r\n\r\n                {/* </Col>\r\n                </Row> */}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const AutoSuggestComponent = (props: IChild) => {\r\n        const { isDisabled, txt } = props;\r\n        return <div className=\"dark\">\r\n            <label className=\"text-warning\">Please enter the Question</label>\r\n            <div className=\"text-start\">\r\n                <div className=\"questions\">\r\n                    {isDisabled &&\r\n                        <div>\r\n                            {txt}\r\n                        </div>\r\n                    }\r\n                    {!isDisabled &&\r\n                        <AutoSuggestQuestions\r\n                            tekst={txt}\r\n                            onSelectQuestion={onSelectQuestion}\r\n                            allCategoryRows={allCategoryRows}\r\n                            searchQuestions={searchQuestions}\r\n                        />\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    // const scrollToBottom = () => {\r\n    //     scrollableRef.current?.scrollIntoView({ behavior: 'smooth', block: 'end' });\r\n    // };\r\n    console.log(\"=====================>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> rendering ChatBotDlg\")\r\n\r\n\r\n    if (allCategoryRows2.length === 0) // || catsOptions.length === 0)\r\n        return <div>Loading ...</div>\r\n\r\n    return (\r\n        <div className=\"pe-6 overflow-auto chat-bot-dlg\">\r\n            <style>{`\r\n                /*\r\n                .card-header {\r\n                    padding: 0.0rem 0.03rem;\r\n                    padding-right: 0;\r\n                    font-size: 0.8rem;\r\n                }\r\n                    */\r\n\r\n                // .card-header button  {\r\n                //     border: 0.3px solid silver;\r\n                //     border-radius: 3px;\r\n                //     text-align: left;\r\n                // }\r\n\r\n                .accordion-body {\r\n                    padding: 0.0rem 0.5rem;\r\n                    padding-right: 0;\r\n                    font-size: 0.6rem;\r\n                }\r\n\r\n                .accordion-button  {\r\n                    padding: 0rem 0.2rem !important;\r\n                    padding-right: 0 !important;\r\n                    border: 0; //px solid inset;\r\n                    //border-radius: 3px;\r\n                    //text-align: left;\r\n                    font-size: 1rem;\r\n                }\r\n                    \r\n                ul {\r\n                    list-style-type: none;\r\n                }\r\n\r\n                .cat-link {\r\n                    // text-decoration:  none;\r\n                    color: inherit;\r\n                }\r\n\r\n                .cat-link.btn {\r\n                    padding: 0;\r\n                }\r\n\r\n                .cat-title {\r\n                    // text-decoration:  none;\r\n                    color: inherit;\r\n                }\r\n\r\n                .accordion-header.hide-icon > button.accordion-button::after {\r\n                    display: none;\r\n                    padding: 0rem 0.2rem !important;\r\n                    padding-right: 0 !important;\r\n                }\r\n\r\n                // .accordion-button.hide-icon::after {\r\n                //     display: none;\r\n                //     padding: 0rem 0.2rem !important;\r\n                //     padding-right: 0 !important;\r\n                // }\r\n\r\n            }\r\n\r\n            `}</style>\r\n            {/* <Button variant=\"primary\" onClick={onHide}>\r\n                Toggle static offcanvas\r\n            </Button> */}\r\n\r\n            {/* backdrop=\"static\" */}\r\n            <Offcanvas show={show} onHide={onHide} placement='end' scroll={true} backdrop={true} onEntering={onEntering}> {/* backdropClassName='chat-bot-dlg' */}\r\n                <Offcanvas.Header closeButton>\r\n                    <Offcanvas.Title className=\"fs-6\">\r\n                        I am your Buddy\r\n                    </Offcanvas.Title>\r\n                </Offcanvas.Header>\r\n                <Offcanvas.Body className=\"p-0 border border-1 rounded-3\">\r\n                    <Container id='container' fluid className='text-primary'> {/* align-items-center\" */}\r\n                        <Row className=\"m-0\">\r\n                            <Col className='border border-0 border-primary mx-1 text-white p-0'>\r\n                                <ChatBotDlgNavigator allCategoryRows={allCategoryRows2} ref={childRef} />\r\n                            </Col>\r\n                        </Row>\r\n                        {/* badge */}\r\n                        <Row className=\"m-0\">\r\n                            <Col className='border border-0 border-primary mx-1 text-white p-0'>\r\n                                {/* <div className=\"d-inline\"> */}\r\n                                {/* <div key='Welcome'>\r\n                                    <p><b>Welcome</b>, I am Buddy and I am here to help You</p>\r\n                                </div> */}\r\n\r\n                                {/* <div className='border border-0 border-primary mx-0 text-white'>\r\n                                    {catLevels.map((catLevel) =>\r\n                                        <CatLevelComponent key={catLevel.level} {...catLevel} />\r\n                                    )}\r\n                                </div> */}\r\n\r\n                                <div key='history' className='history'>\r\n                                    {\r\n                                        pastEvents.map(childProps => {\r\n                                            switch (childProps.type) {\r\n                                                case ChildType.AUTO_SUGGEST:\r\n                                                    return <AutoSuggestComponent {...childProps} />;\r\n                                                case ChildType.QUESTION:\r\n                                                    return <QuestionComponent {...childProps} />;\r\n                                                case ChildType.ANSWER:\r\n                                                    return <AnswerComponent {...childProps} />;\r\n                                                default:\r\n                                                    return <div>unknown</div>\r\n                                            }\r\n                                        })\r\n                                    }\r\n                                </div>\r\n\r\n                                {showAnswer &&\r\n                                    <div key=\"answer\">\r\n                                        <AnswerComponent\r\n                                            type={ChildType.ANSWER}\r\n                                            isDisabled={false}\r\n                                            txt={chatBotAnswer ? chatBotAnswer.answerTitle : 'no answers'}\r\n                                            hasMoreAnswers={hasMoreAnswers}\r\n                                            link={chatBotAnswer ? chatBotAnswer.answerLink : ''}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n\r\n                                {catsSelected && !showAutoSuggest &&\r\n                                    <Button\r\n                                        key=\"newQuestion\"\r\n                                        variant=\"secondary\"\r\n                                        size=\"sm\"\r\n                                        type=\"button\"\r\n                                        onClick={() => {\r\n                                            setAutoSuggestId(autoSuggestId + 1);\r\n                                            setShowAutoSuggest(true);\r\n                                        }}\r\n                                        className='m-1 border border-1 rounded-1 py-0'\r\n                                    >\r\n                                        New Question\r\n                                    </Button>\r\n                                }\r\n\r\n                                {showAutoSuggest &&\r\n                                    <div className=\"pb-35 questions\">\r\n                                        <AutoSuggestComponent\r\n                                            type={ChildType.AUTO_SUGGEST}\r\n                                            isDisabled={false}\r\n                                            txt={autoSuggestionValue!}\r\n                                            link={null}\r\n                                        />\r\n                                    </div>\r\n                                }\r\n                                {/* </div> */}\r\n                                <div ref={scrollableRef}>dno dna</div>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Offcanvas.Body>\r\n            </Offcanvas>\r\n\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default ChatBotDlg;"],"names":["ChatBotAnswer","assignedAnswer","topId","id","answerTitle","answerLink","useAI","question","setQuestion","useState","index","setIndex","setNewQuestion","q","hasMoreAnswers","firstChatBotAnswer","assignedAnswers","getCurrQuestion","useCallback","getNextChatBotAnswer","len","i","ChatBotDlgNavigator","forwardRef","allCategoryRows","ref","navigate","useNavigate","topRows","setTopRows","CatRow","row","hasSubCategories","title","link","jsxs","Accordion","jsx","CatList","rows","Fragment","onSelectCategory","eventKey","e","cat","x","loadSubTree","categoryRow","resetNavigator","prevTopRows","useImperativeHandle","ChatBotDlg","show","onHide","tekst","useParams","autoSuggestionValue","setAutoSuggestionValue","selectedQuestion","setSelectedQuestion","autoSuggestId","setAutoSuggestId","showAnswer","setShowAnswer","chatBotAnswer","setChatBotAnswer","setHasMoreAnswers","allCategoryRowsLoaded","setAllCategoryRowsLoaded","loadAllCategoryRowsGlobal","getQuestion","addHistory","addHistoryFilter","searchQuestions","useGlobalContext","authUser","isDarkMode","useGlobalState","catsSelected","showAutoSuggest","setShowAutoSuggest","setAllCategoryRows","allCategoryRows2","setAllCategoryRows2","childRef","useRef","pastEvents","setPastEvents","ChildType","useEffect","onEntering","startTime","elapsedTime","scrollableRef","onSelectQuestion","questionKey","underFilter","questionCurr","historyFilter","QuestionKey","props","prevEvents","questionEx","res","onAnswerFixed","prevHistory","history","getNextAnswer","next","nextChatBotAnswer","QuestionComponent","txt","Q","AnswerComponent","isDisabled","A","Button","AutoSuggestComponent","AutoSuggestQuestions","Offcanvas","Container","Row","Col","childProps"],"mappings":"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"}