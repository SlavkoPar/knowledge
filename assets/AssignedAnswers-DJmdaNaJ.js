import{c as M,r as S,n as e,B as n,u as R}from"./index-CUqi-i3V.js";import{u as E}from"./Categories-BJbUWKOV.js";import{u as F,L as z,M as t,F as k,q as I,r as T,k as G}from"./Options-EXGgihB2.js";import{f as D}from"./lib-BnBEcQwU.js";import{A as L}from"./AutoSuggestAnswers-Cn-T_wZA.js";import"./AutoSuggestQuestions-By6q447N.js";const Q=({questionTitle:p,assignedAnswer:r,isDisabled:f,unAssignAnswer:i})=>{const{id:u,answerTitle:l,created:o}=r,{time:d,nickName:y}=o,a=localStorage.getItem("emailFromClient"),c=`Created by: ${y}, ${D(new Date(d))}`,{canEdit:A,isDarkMode:x}=M(),m=!1,b=()=>{i(r)},v=N=>{console.log(`Selected Answer id=${N}`)},h=()=>{},[j,w]=S.useState(!1),g=()=>w(!1),C=N=>{navigator.clipboard&&navigator.clipboard.writeText(N).then(()=>{console.log("Copied to clipboard successfully."),alert("Answer copied to clipboard")},H=>{console.log("Failed to copy the text to clipboard.",H)})},[s,B]=F(),$=e.jsxs("div",{ref:s,className:"d-flex justify-content-start align-items-center w-100 text-light bg-info",children:[e.jsx(n,{variant:"link",size:"sm",className:"py-0 px-0 text-info",onClick:()=>a?w(!0):C(l),children:e.jsx(k,{icon:a?I:T,size:"sm",title:"Send this Answer in a reply on Question"})}),e.jsx(n,{variant:"link",size:"sm",className:"py-0 mx-1 text-decoration-none text-white text-wrap",title:c,onClick:()=>v(u),disabled:m,children:l}),A&&!m&&B&&!f&&e.jsx(n,{variant:"link",size:"sm",className:"ms-1 py-0 mx-1 text-secondary",onClick:b,children:e.jsx(k,{icon:G,size:"lg"})})]});return e.jsxs(z.Item,{variant:"info",className:"py-0 px-0",as:"li",children:[$,e.jsxs(t,{show:j,onHide:g,animation:!0,centered:!0,size:"lg",className:`${x?"bg":""}`,contentClassName:`${x?"bg-info bg-gradient":""}`,children:[e.jsx(t.Header,{closeButton:!0,children:"Send Answer in a reply on Question"}),e.jsx(t.Body,{className:"py-0",children:e.jsx("table",{className:"table-info table-hover table-bordered w-100 h-100",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-top-0",children:[e.jsx("td",{children:"To:"}),e.jsx("td",{children:a})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Subject:"}),e.jsx("td",{children:p})]}),e.jsxs("tr",{className:"border-bottom-0",children:[e.jsx("td",{children:"Body:"}),e.jsx("td",{children:l})]})]})})}),e.jsxs(t.Footer,{children:[e.jsx(n,{variant:"secondary",size:"sm",onClick:g,children:"Cancel"}),e.jsx(n,{variant:"primary",size:"sm",onClick:h,children:"Send E-Mail"})]})]})]},u)},P=({})=>e.jsx("span",{children:"Posle"}),Y=({questionKey:p,questionTitle:r,assignedAnswers:f,isDisabled:i})=>{const{globalState:u,searchAnswers:l}=R(),{isDarkMode:o,variant:d}=u,[y,a]=S.useState(!1),c=()=>a(!1),A=()=>{c()},{state:x,assignQuestionAnswer:m}=E(),{allGroupRows:b}=x,[v,h]=S.useState(!1),j=async s=>{await m("Assign",p,s),h(!1)},w=async s=>{s&&await j({topId:s.topId,id:s.id}),c()},g=async s=>{await m("UnAssign",p,s)},C=async()=>{h(!0)};return e.jsxs("div",{className:"mx-0 my-0 px-1 py-1 border border-2 rounded-2 border-info bg-info",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-muted bg-info fs-6",children:"Assigned Answers"}),e.jsx(z,{as:"ul",variant:d,className:"my-1",children:f.map(s=>e.jsx(Q,{questionTitle:r,assignedAnswer:s,groupInAdding:!1,isDisabled:i,unAssignAnswer:g},s.id))}),x.error&&e.jsx("div",{children:"state.error"})]}),e.jsxs("div",{className:"d-flex justify-content-start w-100 align-items-center py-1",children:[e.jsx(n,{size:"sm",className:"button-edit py-0 rounded-1",title:"Assign a new Answer",style:{border:"1px solid silver",fontSize:"12px"},variant:d,disabled:i,onClick:C,children:"Assign answer"}),e.jsx(n,{size:"sm",className:"button-edit py-0 rounded-1 mx-1",title:"Add and Assign a new Answer",style:{border:"1px solid silver",fontSize:"12px"},variant:d,disabled:i,onClick:async s=>{a(!0),s.preventDefault()},children:"Add a new answer"})]}),e.jsxs(t,{show:y,onHide:c,animation:!0,centered:!0,size:"lg",className:"",contentClassName:`${o?"bg-info bg-gradient":""}`,children:[e.jsx(t.Header,{closeButton:!0,children:e.jsx(t.Title,{children:r})}),e.jsx(t.Body,{children:e.jsx(P,{inLine:!0,closeModal:A,onAnswerCreated:w})})]}),e.jsxs(t,{show:v,onHide:()=>h(!1),animation:!0,size:"lg",centered:!0,className:`${o?"dark":""}`,contentClassName:`${o?"dark":""}`,children:[e.jsx(t.Header,{closeButton:!0,children:e.jsx(t.Title,{children:"Assign the answer"})}),e.jsx(t.Body,{style:{height:"40vh",width:"50vw"},className:"answers",children:e.jsx(L,{tekst:"tekst",onSelectAnswer:j,allGroupRows:b,searchAnswers:l})})]})]})};export{Y as default};
//# sourceMappingURL=AssignedAnswers-DJmdaNaJ.js.map
