import{c as H,r as z,n as e,B as n,u as M}from"./index-BN7VQ-7q.js";import{u as E}from"./Categories-B79fjcg4.js";import{u as F,L as R,M as t,F as B,q as G,r as I,k as T}from"./Options-C6xLVu46.js";import{f as L}from"./lib-CQWjQI8b.js";import{A as D}from"./AutoSuggestAnswers-CMSZ4AL_.js";import"./AutoSuggestQuestions-16yKEMSA.js";const Q=({questionTitle:p,assignedAnswer:i,isDisabled:f,unAssignAnswer:l})=>{const{id:u,answerTitle:d,created:w}=i,{time:o,nickName:c}=w,x=localStorage.getItem("emailFromClient"),j=`Created by: ${c}, ${L(new Date(o))}`,{canEdit:A,isDarkMode:m}=H(),a=!1,y=()=>{l(i)},b=k=>{console.log(`Selected Answer id=${k}`)},g=()=>{},[v,r]=z.useState(!1),h=()=>r(!1),C=k=>{navigator.clipboard&&navigator.clipboard.writeText(k).then(()=>{console.log("Copied to clipboard successfully."),alert("Answer copied to clipboard")},$=>{console.log("Failed to copy the text to clipboard.",$)})},[N,S]=F(),s=e.jsxs("div",{ref:N,className:"d-flex justify-content-start align-items-center w-100 text-light bg-info",children:[e.jsx(n,{variant:"link",size:"sm",className:"py-0 px-0 text-info",onClick:()=>x?r(!0):C(d),children:e.jsx(B,{icon:x?G:I,size:"sm",title:"Send this Answer in a reply on Question"})}),e.jsx(n,{variant:"link",size:"sm",className:"py-0 mx-1 text-decoration-none text-white text-wrap",title:j,onClick:()=>b(u),disabled:a,children:d}),A&&!a&&S&&!f&&e.jsx(n,{variant:"link",size:"sm",className:"ms-1 py-0 mx-1 text-secondary",onClick:y,children:e.jsx(B,{icon:T,size:"lg"})})]});return e.jsxs(R.Item,{variant:"info",className:"py-0 px-0",as:"li",children:[s,e.jsxs(t,{show:v,onHide:h,animation:!0,centered:!0,size:"lg",className:`${m?"bg":""}`,contentClassName:`${m?"bg-info bg-gradient":""}`,children:[e.jsx(t.Header,{closeButton:!0,children:"Send Answer in a reply on Question"}),e.jsx(t.Body,{className:"py-0",children:e.jsx("table",{className:"table-info table-hover table-bordered w-100 h-100",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-top-0",children:[e.jsx("td",{children:"To:"}),e.jsx("td",{children:x})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Subject:"}),e.jsx("td",{children:p})]}),e.jsxs("tr",{className:"border-bottom-0",children:[e.jsx("td",{children:"Body:"}),e.jsx("td",{children:d})]})]})})}),e.jsxs(t.Footer,{children:[e.jsx(n,{variant:"secondary",size:"sm",onClick:h,children:"Cancel"}),e.jsx(n,{variant:"primary",size:"sm",onClick:g,children:"Send E-Mail"})]})]})]},u)},P=({})=>e.jsx("span",{children:"Posle"}),Y=({questionKey:p,questionTitle:i,assignedAnswers:f,isDisabled:l})=>{const{globalState:u,searchAnswers:d,loadAndCacheAllGroupRows:w}=M(),{isDarkMode:o,variant:c,allGroupRows:x,allGroupRowsLoaded:j}=u,[A,m]=z.useState(!1),a=()=>m(!1),y=()=>{a()},{state:b,assignQuestionAnswer:g}=E(),[v,r]=z.useState(!1),h=async s=>{await g("Assign",p,s),r(!1)},C=async s=>{s&&await h({topId:s.topId,id:s.id}),a()},N=async s=>{await g("UnAssign",p,s)},S=async()=>{j||await w(),r(!0)};return e.jsxs("div",{className:"mx-0 my-0 px-1 py-1 border border-2 rounded-2 border-info bg-info",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-muted bg-info fs-6",children:"Assigned Answers"}),e.jsx(R,{as:"ul",variant:c,className:"my-1",children:f.map(s=>e.jsx(Q,{questionTitle:i,assignedAnswer:s,groupInAdding:!1,isDisabled:l,unAssignAnswer:N},s.id))}),b.error&&e.jsx("div",{children:"state.error"})]}),e.jsxs("div",{className:"d-flex justify-content-start w-100 align-items-center py-1",children:[e.jsx(n,{size:"sm",className:"button-edit py-0 rounded-1",title:"Assign a new Answer",style:{border:"1px solid silver",fontSize:"12px"},variant:c,disabled:l,onClick:S,children:"Assign answer"}),e.jsx(n,{size:"sm",className:"button-edit py-0 rounded-1 mx-1",title:"Add and Assign a new Answer",style:{border:"1px solid silver",fontSize:"12px"},variant:c,disabled:l,onClick:async s=>{j||await w(),m(!0),s.preventDefault()},children:"Add a new answer"})]}),e.jsxs(t,{show:A,onHide:a,animation:!0,centered:!0,size:"lg",className:"",contentClassName:`${o?"bg-info bg-gradient":""}`,children:[e.jsx(t.Header,{closeButton:!0,children:e.jsx(t.Title,{children:i})}),e.jsx(t.Body,{children:e.jsx(P,{inLine:!0,closeModal:y,onAnswerCreated:C})})]}),e.jsxs(t,{show:v,onHide:()=>r(!1),animation:!0,size:"lg",centered:!0,className:`${o?"dark":""}`,contentClassName:`${o?"dark":""}`,children:[e.jsx(t.Header,{closeButton:!0,children:e.jsx(t.Title,{children:"Assign the answer"})}),e.jsx(t.Body,{style:{height:"40vh",width:"50vw"},className:"answers",children:e.jsx(D,{tekst:"tekst",onSelectAnswer:h,allGroupRows:x,searchAnswers:d})})]})]})};export{Y as default};
//# sourceMappingURL=AssignedAnswers-C5hICNgP.js.map
